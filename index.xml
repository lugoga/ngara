<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Ng'ara</title>
<link>https://www.semba.netlify.app/index.html</link>
<atom:link href="https://www.semba.netlify.app/index.xml" rel="self" type="application/rss+xml"/>
<description></description>
<generator>quarto-1.0.37</generator>
<lastBuildDate>Fri, 12 Aug 2022 21:00:00 GMT</lastBuildDate>
<item>
  <title>Forecasting Rising Temperature with prophet package in R</title>
  <dc:creator>Masumbuko Semba</dc:creator>
  <link>https://www.semba.netlify.app/posts/forecastingTimeseries/index.html</link>
  <description><![CDATA[ 




<p>Time-series analysis aims to analyse and learn the temporal behaviour of datasets over a period</p>
<p><img src="https://www.semba.netlify.app/posts/forecastingTimeseries/forecast.png" class="img-fluid"></p>
<p>Time-series analysis aims to analyse and learn the temporal behaviour of datasets over a period. Examples include the investigation of long-term records of temperature , sea-level fluctuations, the effect of the El Niño/Southern Oscillation on tropical rainfall, and surface current influences on distribution of temperature and rainfall. Th e temporal pattern of a sequence of events in a time series data can be either random, clustered, cyclic, or chaotic.</p>
<p>Time-series analysis provides various tools with which to detect these temporal patterns. Moreover, it helps in learning the behavior of the dataset by plotting the time series object on the graph. In R language, time series objects are handled easily using <code>ts()</code> function that takes the data vector and converts it into time series object as specified in function parameters. Therefore, understanding the underlying processes that produced the observed data allows us to predict future values of the variable.</p>
<p>In this post we learn how to forecast in R. We will use the <strong>prophet</strong> package <span class="citation" data-cites="prophet">[@prophet]</span>, which contain all the necessary routines for time-series analysis. <strong>Prophet</strong> is a package developed by Facebook for forecasting time series objects or data. <strong>Prophet</strong> package is based on decomposable model i.e., trend, seasonality and holidays that helps in making more accurate predictive models. It is much better than the ARIMA model as it helps in tuning and adjusting the input parameters.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;">require</span>(sf)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;">require</span>(tidyverse)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;">require</span>(patchwork)</span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;">require</span>(magrittr)</span>
<span id="cb1-5"><span class="fu" style="color: #4758AB;">require</span>(tmap)</span>
<span id="cb1-6"><span class="fu" style="color: #4758AB;">require</span>(prophet)</span>
<span id="cb1-7"></span>
<span id="cb1-8"><span class="do" style="color: #5E5E5E;
font-style: italic;">## basemap shapefile from tmap package</span></span>
<span id="cb1-9"><span class="fu" style="color: #4758AB;">data</span>(<span class="st" style="color: #20794D;">"World"</span>)</span>
<span id="cb1-10"></span>
<span id="cb1-11"></span>
<span id="cb1-12"><span class="co" style="color: #5E5E5E;"># color codes</span></span>
<span id="cb1-13">mycolor3 <span class="ot" style="color: #003B4F;">=</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"#9000B0"</span>, <span class="st" style="color: #20794D;">"#C900B0"</span>, <span class="st" style="color: #20794D;">"#C760AF"</span>, <span class="st" style="color: #20794D;">"#1190F9"</span>, <span class="st" style="color: #20794D;">"#60C8F8"</span>, <span class="st" style="color: #20794D;">"#90C9F8"</span>, <span class="st" style="color: #20794D;">"#F8F8F8"</span>, <span class="st" style="color: #20794D;">"#F8F800"</span>,  <span class="st" style="color: #20794D;">"#F8D730"</span>, <span class="st" style="color: #20794D;">"#f8b030"</span>, <span class="st" style="color: #20794D;">"#f8602f"</span>, <span class="st" style="color: #20794D;">"#f80000"</span>)</span></code></pre></div>
</div>
<section id="dataset" class="level2">
<h2 class="anchored" data-anchor-id="dataset">Dataset</h2>
<p>We will use the NASA GISTEMP V4 dataset that combine NOAA GHCN meteorological stations and ERSST ocean temperature to form a comprehensive long record of temperature variability of the earth surface. The dataset contains monthly temperature values from 1880 to present, which is widely used to monitor the weather and climate at regional and global scale. Rather than using absolute temperature values, the dataset uses anomaly obtained by using base period (1951-1980).</p>
<p>NASA’s analysis incorporates surface temperature measurements from more than 26,000 weather stations and thousands of ship- and buoy-based observations of sea surface temperatures. These raw measurements are analyzed using an algorithm that considers the varied spacing of temperature stations around the globe and urban heating effects that could skew the conclusions if not taken into account. The result of these calculations is an estimate of the global average temperature difference from a baseline period of 1951 to 1980.</p>
<p>This dataset is open and free to download as netCDF format file at <a href="https://data.giss.nasa.gov/gistemp/">GISTEMP</a>. I have processed the file and we can load as the csv file here.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">global <span class="ot" style="color: #003B4F;">=</span> <span class="fu" style="color: #4758AB;">read_csv</span>(<span class="st" style="color: #20794D;">"../data/temperature_lss_global_1990_2020_2021.csv"</span>)</span></code></pre></div>
</div>
<p>The Earth’s global average surface temperature in 2021 tied 2018 (<em>See</em> Figure&nbsp;1) is the sixth-warmest year on record, according to independent analyses from NASA and the National Oceanic and Atmospheric Administration (NOAA). According to scientists at NASA’s Goddard Institute for Space Studies (GISS), global temperatures in 2021 were 0.85 degrees Celsius above the average for NASA’s baseline period,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">temperature <span class="ot" style="color: #003B4F;">=</span> global <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">filter</span>(year <span class="sc" style="color: #5E5E5E;">==</span> <span class="dv" style="color: #AD0000;">2021</span>)</span>
<span id="cb3-2"></span>
<span id="cb3-3"><span class="fu" style="color: #4758AB;">ggplot</span>()<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb3-4">  metR<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">geom_contour_fill</span>(<span class="at" style="color: #657422;">data =</span> temperature, <span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> lon, <span class="at" style="color: #657422;">y =</span> lat, <span class="at" style="color: #657422;">z =</span> temperature),<span class="at" style="color: #657422;">bins =</span> <span class="dv" style="color: #AD0000;">120</span>)<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb3-5">  metR<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">geom_contour2</span>(<span class="at" style="color: #657422;">data =</span> temperature, <span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> lon, <span class="at" style="color: #657422;">y =</span> lat, <span class="at" style="color: #657422;">z =</span> temperature,<span class="at" style="color: #657422;">label =</span> ..level..), <span class="at" style="color: #657422;">breaks =</span> <span class="dv" style="color: #AD0000;">0</span>, <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"red"</span>)<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb3-6">  ggspatial<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">layer_spatial</span>(<span class="at" style="color: #657422;">data =</span> World, <span class="at" style="color: #657422;">fill =</span> <span class="cn" style="color: #8f5902;">NA</span>)<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb3-7">  <span class="fu" style="color: #4758AB;">coord_sf</span>(<span class="at" style="color: #657422;">xlim =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="sc" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">180</span>,<span class="dv" style="color: #AD0000;">180</span>), <span class="at" style="color: #657422;">ylim =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="sc" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">70</span>,<span class="dv" style="color: #AD0000;">70</span>))<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb3-8">  <span class="co" style="color: #5E5E5E;"># metR::scale_fill_divergent(midpoint = 0)+</span></span>
<span id="cb3-9">  <span class="fu" style="color: #4758AB;">scale_fill_gradientn</span>(<span class="at" style="color: #657422;">colours =</span> mycolor3, </span>
<span id="cb3-10">                       <span class="co" style="color: #5E5E5E;"># trans = scales::modulus_trans(p = .1),</span></span>
<span id="cb3-11">                       <span class="at" style="color: #657422;">name =</span> <span class="fu" style="color: #4758AB;">expression</span>(T<span class="sc" style="color: #5E5E5E;">~</span>(degree<span class="sc" style="color: #5E5E5E;">*</span>C))) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb3-12">  <span class="fu" style="color: #4758AB;">theme_bw</span>(<span class="at" style="color: #657422;">base_size =</span> <span class="dv" style="color: #AD0000;">12</span>)<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb3-13">  <span class="fu" style="color: #4758AB;">theme</span>(<span class="at" style="color: #657422;">axis.title =</span> <span class="fu" style="color: #4758AB;">element_blank</span>())<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb3-14">  <span class="co" style="color: #5E5E5E;"># metR::scale_y_latitude(ticks = 15)+</span></span>
<span id="cb3-15">  metR<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">scale_x_longitude</span>()</span></code></pre></div>
<div class="cell-output-display">
<div id="fig-temperature" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://www.semba.netlify.app/posts/forecastingTimeseries/index_files/figure-html/fig-temperature-1.png" class="img-fluid figure-img" width="768"></p>
<p></p><figcaption class="figure-caption">Figure 1: Global land and sea surface temperature anomaly for a year 2021 compared to to the 1950-1980 average</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Regardless of the COVID-19 pandemic that reduction in mobility and human activities, along with reduced industrial production, has led to lower levels of nitrogen dioxide (NO2) and and the subsequent decrease of fossil fuel burning and CO<sub>2</sub> emissions, NASA found that the year 2020 (Figure&nbsp;2) was the hottest year on record. Continuing the planet’s long-term warming trend, the year’s globally averaged temperature was 1.02 degrees Celsius warmer than the baseline 1951-1980 mean, according to scientists at NASA’s Goddard Institute for Space Studies (GISS) in New York. 2020 edged out 2016 by a very small amount, within the margin of error of the analysis, making the years effectively tied for the warmest year on record. The last seven years have been the warmest seven years on record.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">temperature <span class="ot" style="color: #003B4F;">=</span> global <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">filter</span>(year <span class="sc" style="color: #5E5E5E;">==</span> <span class="dv" style="color: #AD0000;">2020</span>)</span>
<span id="cb4-2"></span>
<span id="cb4-3"><span class="fu" style="color: #4758AB;">ggplot</span>()<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb4-4">  metR<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">geom_contour_fill</span>(<span class="at" style="color: #657422;">data =</span> temperature, <span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> lon, <span class="at" style="color: #657422;">y =</span> lat, <span class="at" style="color: #657422;">z =</span> temperature),<span class="at" style="color: #657422;">bins =</span> <span class="dv" style="color: #AD0000;">120</span>)<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb4-5">  metR<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">geom_contour2</span>(<span class="at" style="color: #657422;">data =</span> temperature, <span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> lon, <span class="at" style="color: #657422;">y =</span> lat, <span class="at" style="color: #657422;">z =</span> temperature,<span class="at" style="color: #657422;">label =</span> ..level..), <span class="at" style="color: #657422;">breaks =</span> <span class="dv" style="color: #AD0000;">0</span>, <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"red"</span>)<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb4-6">  ggspatial<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">layer_spatial</span>(<span class="at" style="color: #657422;">data =</span> World, <span class="at" style="color: #657422;">fill =</span> <span class="cn" style="color: #8f5902;">NA</span>)<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb4-7">  <span class="fu" style="color: #4758AB;">coord_sf</span>(<span class="at" style="color: #657422;">xlim =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="sc" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">180</span>,<span class="dv" style="color: #AD0000;">180</span>), <span class="at" style="color: #657422;">ylim =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="sc" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">70</span>,<span class="dv" style="color: #AD0000;">70</span>))<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb4-8">  <span class="co" style="color: #5E5E5E;"># metR::scale_fill_divergent(midpoint = 0)+</span></span>
<span id="cb4-9">  <span class="fu" style="color: #4758AB;">scale_fill_gradientn</span>(<span class="at" style="color: #657422;">colours =</span> mycolor3, </span>
<span id="cb4-10">                       <span class="co" style="color: #5E5E5E;"># trans = scales::modulus_trans(p = .1),</span></span>
<span id="cb4-11">                       <span class="at" style="color: #657422;">name =</span> <span class="fu" style="color: #4758AB;">expression</span>(T<span class="sc" style="color: #5E5E5E;">~</span>(degree<span class="sc" style="color: #5E5E5E;">*</span>C))) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb4-12">  <span class="fu" style="color: #4758AB;">theme_bw</span>(<span class="at" style="color: #657422;">base_size =</span> <span class="dv" style="color: #AD0000;">12</span>)<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb4-13">  <span class="fu" style="color: #4758AB;">theme</span>(<span class="at" style="color: #657422;">axis.title =</span> <span class="fu" style="color: #4758AB;">element_blank</span>())<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb4-14">  <span class="co" style="color: #5E5E5E;"># metR::scale_y_latitude(ticks = 15)+</span></span>
<span id="cb4-15">  metR<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">scale_x_longitude</span>()</span></code></pre></div>
<div class="cell-output-display">
<div id="fig-hottest" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://www.semba.netlify.app/posts/forecastingTimeseries/index_files/figure-html/fig-hottest-1.png" class="img-fluid figure-img" width="768"></p>
<p></p><figcaption class="figure-caption">Figure 2: 2020! the hottest year on record</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="data-preparation-exploration" class="level2">
<h2 class="anchored" data-anchor-id="data-preparation-exploration">Data Preparation &amp; Exploration</h2>
<p>Prophet works best with periodicity data with at least one year of historical data. It’s possible to use Prophet to forecast using sub-daily or monthly data, but for the purposes of this post, we’ll use the monthly periodicity of global temperature—land and ocean . Let’s us read the file into our session</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">monthly <span class="ot" style="color: #003B4F;">=</span> <span class="fu" style="color: #4758AB;">read_csv</span>(<span class="st" style="color: #20794D;">"../data/temperature_lss.csv"</span>)</span>
<span id="cb5-2"></span>
<span id="cb5-3">monthly <span class="sc" style="color: #5E5E5E;">%&gt;%</span> FSA<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">headtail</span>(<span class="at" style="color: #657422;">n =</span> <span class="dv" style="color: #AD0000;">5</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           time temperature
1    1880-01-15  -0.2322751
2    1880-02-15  -0.4008110
3    1880-03-15  -0.1818604
4    1880-04-15  -0.2003687
5    1880-05-15  -0.1266611
1701 2021-09-15   1.1336590
1702 2021-10-15   1.3624321
1703 2021-11-15   1.0853070
1704 2021-12-15   0.9597652
1705 2022-01-15   1.1144421</code></pre>
</div>
</div>
<p>Looking on the printed dataset, we note that we have records of land and sea temperature since January 1880 through January 2022. That is the long historical data that suits our analysis. The first thing we need to do is to create a time-series object in R. This is done by using a <code>ts</code> function and specify the start year and the frequency of observation. Since we have monthly records, the frequency for each year will be 12 as the chunk highlight</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">ts.temp <span class="ot" style="color: #003B4F;">=</span> monthly <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb7-2">  <span class="fu" style="color: #4758AB;">pull</span>(temperature) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb7-3">  <span class="fu" style="color: #4758AB;">ts</span>(<span class="at" style="color: #657422;">start =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">1880</span>,<span class="dv" style="color: #AD0000;">1</span>), <span class="at" style="color: #657422;">frequency =</span> <span class="dv" style="color: #AD0000;">12</span>)</span></code></pre></div>
</div>
<p>But, although we have that long historical dataset, we are more interested in the most recent records. Therefore, we filter all records since 1980 for our analysis. We can achieve this by simply passing the limiting year and month in the <code>window</code> function. Once we have filtered the dataset, we then convert the ts object to prophet format using a <code>ts_to_prophet</code> function from <strong>TSstudio</strong> package</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">ts.df <span class="ot" style="color: #003B4F;">=</span> ts.temp <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb8-2">  <span class="fu" style="color: #4758AB;">window</span>(<span class="at" style="color: #657422;">start =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">1980</span>,<span class="dv" style="color: #AD0000;">1</span>)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb8-3">  TSstudio<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">ts_to_prophet</span>()</span></code></pre></div>
</div>
<p>Tracking global temperature trends provides a critical indicator of the impact of human activities— specifically, greenhouse gas emissions – on our planet. Visualizing the dataset as seen in figure figure @ref(fig:trend). It’s an undeniable fact the global mean temperature is constantly rising. Earth’s average temperature has risen above 1.2 degrees Celsius) since the late 19th century and the IPCC has pointed out the increase should be limited to 1.5 °C above pre-industrial levels, to have any hope of mitigating the harmful effects of climate change.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">ts.df <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb9-2">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> ds, <span class="at" style="color: #657422;">y =</span> y))<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb9-3">  <span class="fu" style="color: #4758AB;">geom_line</span>()<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb9-4">  <span class="fu" style="color: #4758AB;">geom_smooth</span>(<span class="at" style="color: #657422;">fill =</span> <span class="st" style="color: #20794D;">"red"</span>, <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"red"</span>, <span class="at" style="color: #657422;">alpha =</span> .<span class="dv" style="color: #AD0000;">2</span>)<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb9-5">  <span class="fu" style="color: #4758AB;">scale_y_continuous</span>(<span class="at" style="color: #657422;">name =</span> <span class="fu" style="color: #4758AB;">expression</span>(Temperature<span class="sc" style="color: #5E5E5E;">~</span>(degree<span class="sc" style="color: #5E5E5E;">*</span>C)))<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb9-6">  <span class="fu" style="color: #4758AB;">scale_x_date</span>(<span class="at" style="color: #657422;">date_breaks =</span> <span class="st" style="color: #20794D;">"3 year"</span>, <span class="at" style="color: #657422;">labels =</span> scales<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">label_date_short</span>())<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb9-7">  <span class="fu" style="color: #4758AB;">theme_bw</span>(<span class="at" style="color: #657422;">base_size =</span> <span class="dv" style="color: #AD0000;">12</span>)<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb9-8">  <span class="fu" style="color: #4758AB;">theme</span>(<span class="at" style="color: #657422;">axis.title.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(), <span class="at" style="color: #657422;">panel.grid.minor =</span> <span class="fu" style="color: #4758AB;">element_blank</span>())</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://www.semba.netlify.app/posts/forecastingTimeseries/index_files/figure-html/trend-1.png" class="img-fluid figure-img" width="768"></p>
<p></p><figcaption class="figure-caption">Trend of global temperature</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="forecasting" class="level2">
<h2 class="anchored" data-anchor-id="forecasting">Forecasting</h2>
<p>The first step in creating a forecast using Prophet is importing the <strong>prophet</strong> library into our R session. Once the prophet library is loaded into our session, we’re ready to fit a model to our historical data. We can achieve that by simply calling the<code>prophet()</code> function using your prepared dataframe as an input:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">m <span class="ot" style="color: #003B4F;">=</span> ts.df <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">prophet</span>()</span></code></pre></div>
</div>
<p>Once we have used <strong>Prophet</strong> to fit the model dataset, we can now start making predictions for future dates. Prophet has a built-in helper function <code>make_future_dataframe</code> to create a dataframe of future dates. The <code>make_future_dataframe</code> function, which allows to specify the frequency and number of periods we would like to forecast into the future. By default, the frequency is set to days. Since we are using daily periodicity data in this example, we will leave freq at it’s default and set the periods argument to 365, indicating that we would like to forecast 365 days into the future.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">future <span class="ot" style="color: #003B4F;">=</span> m <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb11-2">  <span class="fu" style="color: #4758AB;">make_future_dataframe</span>(<span class="dv" style="color: #AD0000;">120</span>,<span class="at" style="color: #657422;">freq =</span> <span class="st" style="color: #20794D;">"month"</span>)</span></code></pre></div>
</div>
<p>We can now use the <code>predict()</code> function to make predictions for each row in the future dataframe.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">forecast <span class="ot" style="color: #003B4F;">=</span> m <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">predict</span>(future)</span></code></pre></div>
</div>
<p>At this point, Prophet will have created a new dataframe assigned to the forecast variable that contains the forecasted values for future dates under a column called yhat, as well as uncertainty intervals and components for the forecast. We can visualize the forecast using Prophet’s built-in plot helper function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="fu" style="color: #4758AB;">plot</span>(<span class="at" style="color: #657422;">x =</span> m, <span class="at" style="color: #657422;">fcst =</span> forecast, <span class="at" style="color: #657422;">uncertainty =</span> T,<span class="at" style="color: #657422;">plot_cap =</span> T,)<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb13-2">  <span class="fu" style="color: #4758AB;">scale_y_continuous</span>(<span class="at" style="color: #657422;">name =</span> <span class="fu" style="color: #4758AB;">expression</span>(Temperature<span class="sc" style="color: #5E5E5E;">~</span>(degree<span class="sc" style="color: #5E5E5E;">*</span>C)))<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb13-3">  <span class="co" style="color: #5E5E5E;"># scale_x_date(date_breaks = "3 year", labels = scales::label_date_short())+</span></span>
<span id="cb13-4">  <span class="fu" style="color: #4758AB;">theme_bw</span>(<span class="at" style="color: #657422;">base_size =</span> <span class="dv" style="color: #AD0000;">12</span>)<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb13-5">  <span class="fu" style="color: #4758AB;">theme</span>(<span class="at" style="color: #657422;">axis.title.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>())<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb13-6">  <span class="fu" style="color: #4758AB;">add_changepoints_to_plot</span>(<span class="at" style="color: #657422;">m =</span> m, <span class="at" style="color: #657422;">threshold =</span> <span class="fl" style="color: #AD0000;">0.1</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://www.semba.netlify.app/posts/forecastingTimeseries/index_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>If we want to visualize the individual forecast components, we can use Prophet’s built-in plot_components function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><span class="fu" style="color: #4758AB;">plot_forecast_component</span>(<span class="at" style="color: #657422;">m =</span> m, <span class="at" style="color: #657422;">fcst =</span> forecast, <span class="at" style="color: #657422;">name =</span> <span class="st" style="color: #20794D;">"trend"</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://www.semba.netlify.app/posts/forecastingTimeseries/index_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="768"></p>
</div>
</div>


</section>

<p>This blog is brought to you by <a href="https://semba.netlify.app" class="uri">https://semba.netlify.app</a></p> ]]></description>
  <category>code</category>
  <category>analysis</category>
  <category>spatial</category>
  <guid>https://www.semba.netlify.app/posts/forecastingTimeseries/index.html</guid>
  <pubDate>Fri, 12 Aug 2022 21:00:00 GMT</pubDate>
  <media:content url="https://www.semba.netlify.app/posts/forecastingTimeseries/forecast.png" medium="image" type="image/png" height="54" width="144"/>
</item>
<item>
  <title>Teacher’s Employment Allocations by LGA</title>
  <dc:creator>Masjumbuko Semba</dc:creator>
  <link>https://www.semba.netlify.app/posts/newvisuals/index.html</link>
  <description><![CDATA[ 




<p>The visual impact of the flow diagram has caught the form of looking…….</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://www.semba.netlify.app/posts/newvisuals/packedbubble.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Packed bubble</figcaption><p></p>
</figure>
</div>
<p>On April, 2022, the government of the United Republic of Tanzania approved permission of TAMISEMI to recruit and employ 9,800 primary and secondary school teachers, and 7,612 health experts. A total of 165,948 applied for the positions where for Health Cadres is 42,558, and the Teaching Cadre is 123,390.</p>
<p>Allocation of health and Teaching position in Centers of providing health services and schools have considered the requirements of employees in the respective regions. The allocation of new employees was based on the needs of employees in Councils with new Hospitals, Centers New health, and new completed clinics that faced shortage of medical staffs.</p>
<p>In addition, teachers were allocated to councils based on the division of spacevfor each subject, and the qualifications. In this post, we are going to discuss</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;">require</span>(sf)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;">require</span>(highcharter)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;">require</span>(tidyverse)</span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;">require</span>(chorddiag)</span>
<span id="cb1-5"><span class="fu" style="color: #4758AB;">require</span>(treemapify)</span>
<span id="cb1-6"><span class="fu" style="color: #4758AB;">library</span>(RColorBrewer)</span></code></pre></div>
</div>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">districts <span class="ot" style="color: #003B4F;">=</span> <span class="fu" style="color: #4758AB;">st_read</span>(<span class="st" style="color: #20794D;">"data/spatial/Districts and TC as 2020.shp"</span>, <span class="at" style="color: #657422;">quiet =</span> <span class="cn" style="color: #8f5902;">TRUE</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> janitor<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">clean_names</span>()</span>
<span id="cb2-2"></span>
<span id="cb2-3"></span>
<span id="cb2-4">district.tb <span class="ot" style="color: #003B4F;">=</span> districts <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb2-5">  <span class="fu" style="color: #4758AB;">st_point_on_surface</span>() <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb2-6">  wior<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">point_tb</span>() <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb2-7">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="fu" style="color: #4758AB;">across</span>(is.numeric, round, <span class="dv" style="color: #AD0000;">0</span>)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb2-8">  <span class="fu" style="color: #4758AB;">separate</span>(new_dist20, <span class="at" style="color: #657422;">into =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"district"</span>, <span class="st" style="color: #20794D;">"lga"</span>), <span class="at" style="color: #657422;">sep =</span> <span class="st" style="color: #20794D;">" "</span>)<span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb2-9">  <span class="fu" style="color: #4758AB;">separate</span>(district, <span class="at" style="color: #657422;">into =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"code"</span>, <span class="st" style="color: #20794D;">"aa"</span>), <span class="at" style="color: #657422;">sep =</span> <span class="dv" style="color: #AD0000;">3</span>, <span class="at" style="color: #657422;">remove =</span> <span class="cn" style="color: #8f5902;">FALSE</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb2-10">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">code =</span> <span class="fu" style="color: #4758AB;">str_to_upper</span>(code),</span>
<span id="cb2-11">         <span class="at" style="color: #657422;">zone =</span> <span class="fu" style="color: #4758AB;">case_when</span>(region_nam <span class="sc" style="color: #5E5E5E;">%in%</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">'Tanga'</span>, <span class="st" style="color: #20794D;">'Morogoro'</span>, <span class="st" style="color: #20794D;">'Pwani'</span>,<span class="st" style="color: #20794D;">'Dar-es-salaam'</span>)<span class="sc" style="color: #5E5E5E;">~</span><span class="st" style="color: #20794D;">"Coast"</span>,</span>
<span id="cb2-12">                          region_nam <span class="sc" style="color: #5E5E5E;">%in%</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"Arusha"</span>,<span class="st" style="color: #20794D;">"Kilimanjaro"</span>, <span class="st" style="color: #20794D;">"Manyara"</span>)<span class="sc" style="color: #5E5E5E;">~</span><span class="st" style="color: #20794D;">"Northern"</span>,</span>
<span id="cb2-13">                          region_nam <span class="sc" style="color: #5E5E5E;">%in%</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">'Tabora'</span>, <span class="st" style="color: #20794D;">'Kigoma'</span>, <span class="st" style="color: #20794D;">'Shinyanga'</span>, <span class="st" style="color: #20794D;">'Kagera'</span>, <span class="st" style="color: #20794D;">'Mwanza'</span>,<span class="st" style="color: #20794D;">"Geita"</span>, <span class="st" style="color: #20794D;">'Mara'</span>, <span class="st" style="color: #20794D;">"Simiyu"</span>, <span class="st" style="color: #20794D;">"Katavi"</span>)<span class="sc" style="color: #5E5E5E;">~</span><span class="st" style="color: #20794D;">"Lake"</span>,</span>
<span id="cb2-14">                          region_nam <span class="sc" style="color: #5E5E5E;">%in%</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"Dodoma"</span>, <span class="st" style="color: #20794D;">"Singida"</span>)<span class="sc" style="color: #5E5E5E;">~</span><span class="st" style="color: #20794D;">"Central"</span>,</span>
<span id="cb2-15">                          region_nam <span class="sc" style="color: #5E5E5E;">%in%</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"Iringa"</span>, <span class="st" style="color: #20794D;">"Mbeya"</span>, <span class="st" style="color: #20794D;">"Songwe"</span>, <span class="st" style="color: #20794D;">"Ruvuma"</span>, <span class="st" style="color: #20794D;">"Rukwa"</span>, <span class="st" style="color: #20794D;">"Njombe"</span>)<span class="sc" style="color: #5E5E5E;">~</span><span class="st" style="color: #20794D;">"Southern Highland"</span>,</span>
<span id="cb2-16">                          region_nam <span class="sc" style="color: #5E5E5E;">%in%</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">'Lindi'</span>, <span class="st" style="color: #20794D;">'Mtwara'</span>,<span class="st" style="color: #20794D;">'Ruvuma'</span>)<span class="sc" style="color: #5E5E5E;">~</span><span class="st" style="color: #20794D;">"Southern"</span>)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb2-17">  <span class="fu" style="color: #4758AB;">filter</span>(<span class="sc" style="color: #5E5E5E;">!</span><span class="fu" style="color: #4758AB;">is.na</span>(zone))</span></code></pre></div>
</div>
<section id="tilemap" class="level2">
<h2 class="anchored" data-anchor-id="tilemap">Tilemap</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">district.tb <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb3-2">  <span class="fu" style="color: #4758AB;">hchart</span>(<span class="at" style="color: #657422;">type =</span> <span class="st" style="color: #20794D;">"tilemap"</span>, <span class="fu" style="color: #4758AB;">hcaes</span>(<span class="at" style="color: #657422;">x =</span> lon, <span class="at" style="color: #657422;">y =</span> lat, <span class="at" style="color: #657422;">name =</span> district, <span class="at" style="color: #657422;">group =</span> zone)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb3-3">  <span class="fu" style="color: #4758AB;">hc_chart</span>(<span class="at" style="color: #657422;">type =</span> <span class="st" style="color: #20794D;">"tilemap"</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb3-4">  <span class="fu" style="color: #4758AB;">hc_plotOptions</span>(</span>
<span id="cb3-5">    <span class="at" style="color: #657422;">series =</span> <span class="fu" style="color: #4758AB;">list</span>(</span>
<span id="cb3-6">      <span class="at" style="color: #657422;">dataLabels =</span> <span class="fu" style="color: #4758AB;">list</span>(</span>
<span id="cb3-7">        <span class="at" style="color: #657422;">enabled =</span> <span class="cn" style="color: #8f5902;">TRUE</span>,</span>
<span id="cb3-8">        <span class="at" style="color: #657422;">format =</span> <span class="st" style="color: #20794D;">"{point.code}"</span>,</span>
<span id="cb3-9">        <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"white"</span>,</span>
<span id="cb3-10">        <span class="at" style="color: #657422;">style =</span> <span class="fu" style="color: #4758AB;">list</span>(<span class="at" style="color: #657422;">textOutline =</span> <span class="cn" style="color: #8f5902;">FALSE</span>)</span>
<span id="cb3-11">      )</span>
<span id="cb3-12">    )</span>
<span id="cb3-13">  ) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb3-14">  <span class="fu" style="color: #4758AB;">hc_tooltip</span>(</span>
<span id="cb3-15">    <span class="at" style="color: #657422;">headerFormat =</span> <span class="st" style="color: #20794D;">""</span>,</span>
<span id="cb3-16">    <span class="at" style="color: #657422;">pointFormat =</span> <span class="st" style="color: #20794D;">"&lt;b&gt;{point.name}&lt;/b&gt; is in &lt;b&gt;{point.region_nam}&lt;/b&gt;"</span></span>
<span id="cb3-17">    ) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb3-18">  <span class="fu" style="color: #4758AB;">hc_xAxis</span>(<span class="at" style="color: #657422;">visible =</span> <span class="cn" style="color: #8f5902;">FALSE</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb3-19">  <span class="fu" style="color: #4758AB;">hc_yAxis</span>(<span class="at" style="color: #657422;">visible =</span> <span class="cn" style="color: #8f5902;">FALSE</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb3-20">  <span class="fu" style="color: #4758AB;">hc_size</span>(<span class="at" style="color: #657422;">height =</span> <span class="dv" style="color: #AD0000;">800</span>, <span class="at" style="color: #657422;">width =</span> <span class="dv" style="color: #AD0000;">600</span>)</span></code></pre></div>
<div class="cell-output-display">

<div id="htmlwidget-612f15f619ada0d7654b" style="width:100%;height:866px;" class="highchart html-widget"></div>
<script type="application/json" data-for="htmlwidget-612f15f619ada0d7654b">{"x":{"hc_opts":{"chart":{"reflow":true,"type":"tilemap","width":600,"height":800},"title":{"text":null},"yAxis":{"title":{"text":"lat"},"type":"linear","visible":false},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true,"dataLabels":{"enabled":true,"format":"{point.code}","color":"white","style":{"textOutline":false}}},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}}},"series":[{"name":"Central","data":[{"lon":35,"lat":-6,"region_nam":"Dodoma","region_cod":1,"district_c":6,"district":"Bahi","code":"BAH","aa":"i","lga":"DC","zone":"Central","x":35,"y":-6,"name":"Bahi"},{"lon":36,"lat":-6,"region_nam":"Dodoma","region_cod":1,"district_c":4,"district":"Chamwino","code":"CHA","aa":"mwino","lga":"DC","zone":"Central","x":36,"y":-6,"name":"Chamwino"},{"lon":36,"lat":-5,"region_nam":"Dodoma","region_cod":1,"district_c":7,"district":"Chemba","code":"CHE","aa":"mba","lga":"DC","zone":"Central","x":36,"y":-5,"name":"Chemba"},{"lon":36,"lat":-6,"region_nam":"Dodoma","region_cod":1,"district_c":5,"district":"Dodoma","code":"DOD","aa":"oma","lga":"CC","zone":"Central","x":36,"y":-6,"name":"Dodoma"},{"lon":36,"lat":-5,"region_nam":"Dodoma","region_cod":1,"district_c":1,"district":"Kondoa","code":"KON","aa":"doa","lga":"DC","zone":"Central","x":36,"y":-5,"name":"Kondoa"},{"lon":37,"lat":-6,"region_nam":"Dodoma","region_cod":1,"district_c":3,"district":"Kongwa","code":"KON","aa":"gwa","lga":"DC","zone":"Central","x":37,"y":-6,"name":"Kongwa"},{"lon":36,"lat":-7,"region_nam":"Dodoma","region_cod":1,"district_c":2,"district":"Mpwapwa","code":"MPW","aa":"apwa","lga":"DC","zone":"Central","x":36,"y":-7,"name":"Mpwapwa"},{"lon":35,"lat":-5,"region_nam":"Singida","region_cod":13,"district_c":5,"district":"Ikungi","code":"IKU","aa":"ngi","lga":"DC","zone":"Central","x":35,"y":-5,"name":"Ikungi"},{"lon":34,"lat":-4,"region_nam":"Singida","region_cod":13,"district_c":1,"district":"Iramba","code":"IRA","aa":"mba","lga":"DC","zone":"Central","x":34,"y":-4,"name":"Iramba"},{"lon":35,"lat":-6,"region_nam":"Singida","region_cod":13,"district_c":3,"district":"Manyoni","code":"MAN","aa":"yoni","lga":"DC","zone":"Central","x":35,"y":-6,"name":"Manyoni"},{"lon":35,"lat":-4,"region_nam":"Singida","region_cod":13,"district_c":6,"district":"Mkalama","code":"MKA","aa":"lama","lga":"DC","zone":"Central","x":35,"y":-4,"name":"Mkalama"},{"lon":35,"lat":-5,"region_nam":"Singida","region_cod":13,"district_c":2,"district":"Singida","code":"SIN","aa":"gida","lga":"DC","zone":"Central","x":35,"y":-5,"name":"Singida"},{"lon":35,"lat":-5,"region_nam":"Singida","region_cod":13,"district_c":4,"district":"Singida","code":"SIN","aa":"gida","lga":"MC","zone":"Central","x":35,"y":-5,"name":"Singida"},{"lon":34,"lat":-6,"region_nam":"Singida","region_cod":13,"district_c":7,"district":"Itigi","code":"ITI","aa":"gi","lga":"DC","zone":"Central","x":34,"y":-6,"name":"Itigi"},{"lon":36,"lat":-5,"region_nam":"Dodoma","region_cod":1,"district_c":8,"district":"Kondoa","code":"KON","aa":"doa","lga":"TC","zone":"Central","x":36,"y":-5,"name":"Kondoa"}],"type":"tilemap"},{"name":"Coast","data":[{"lon":39,"lat":-7,"region_nam":"Dar-es-salaam","region_cod":7,"district_c":2,"district":"Dar","code":"DAR","aa":"","lga":"es","zone":"Coast","x":39,"y":-7,"name":"Dar"},{"lon":39,"lat":-7,"region_nam":"Dar-es-salaam","region_cod":7,"district_c":1,"district":"Kinondoni","code":"KIN","aa":"ondoni","lga":"MC","zone":"Coast","x":39,"y":-7,"name":"Kinondoni"},{"lon":39,"lat":-7,"region_nam":"Dar-es-salaam","region_cod":7,"district_c":3,"district":"Temeke","code":"TEM","aa":"eke","lga":"MC","zone":"Coast","x":39,"y":-7,"name":"Temeke"},{"lon":37,"lat":-6,"region_nam":"Morogoro","region_cod":5,"district_c":7,"district":"Gairo","code":"GAI","aa":"ro","lga":"DC","zone":"Coast","x":37,"y":-6,"name":"Gairo"},{"lon":37,"lat":-8,"region_nam":"Morogoro","region_cod":5,"district_c":3,"district":"Mlimba","code":"MLI","aa":"mba","lga":"DC","zone":"Coast","x":37,"y":-8,"name":"Mlimba"},{"lon":37,"lat":-7,"region_nam":"Morogoro","region_cod":5,"district_c":1,"district":"Kilosa","code":"KIL","aa":"osa","lga":"DC","zone":"Coast","x":37,"y":-7,"name":"Kilosa"},{"lon":38,"lat":-7,"region_nam":"Morogoro","region_cod":5,"district_c":2,"district":"Morogoro","code":"MOR","aa":"ogoro","lga":"DC","zone":"Coast","x":38,"y":-7,"name":"Morogoro"},{"lon":38,"lat":-7,"region_nam":"Morogoro","region_cod":5,"district_c":5,"district":"Morogoro","code":"MOR","aa":"ogoro","lga":"MC","zone":"Coast","x":38,"y":-7,"name":"Morogoro"},{"lon":38,"lat":-7,"region_nam":"Morogoro","region_cod":5,"district_c":6,"district":"Mvomero","code":"MVO","aa":"mero","lga":"DC","zone":"Coast","x":38,"y":-7,"name":"Mvomero"},{"lon":37,"lat":-9,"region_nam":"Morogoro","region_cod":5,"district_c":4,"district":"Ulanga","code":"ULA","aa":"nga","lga":"DC","zone":"Coast","x":37,"y":-9,"name":"Ulanga"},{"lon":38,"lat":-6,"region_nam":"Pwani","region_cod":6,"district_c":9,"district":"Chalinze","code":"CHA","aa":"linze","lga":"DC","zone":"Coast","x":38,"y":-6,"name":"Chalinze"},{"lon":39,"lat":-7,"region_nam":"Pwani","region_cod":6,"district_c":2,"district":"Kibaha","code":"KIB","aa":"aha","lga":"DC","zone":"Coast","x":39,"y":-7,"name":"Kibaha"},{"lon":39,"lat":-7,"region_nam":"Pwani","region_cod":6,"district_c":7,"district":"Kibaha","code":"KIB","aa":"aha","lga":"TC","zone":"Coast","x":39,"y":-7,"name":"Kibaha"},{"lon":39,"lat":-7,"region_nam":"Pwani","region_cod":6,"district_c":3,"district":"Kisarawe","code":"KIS","aa":"arawe","lga":"DC","zone":"Coast","x":39,"y":-7,"name":"Kisarawe"},{"lon":40,"lat":-8,"region_nam":"Pwani","region_cod":6,"district_c":6,"district":"Mafia","code":"MAF","aa":"ia","lga":"DC","zone":"Coast","x":40,"y":-8,"name":"Mafia"},{"lon":39,"lat":-7,"region_nam":"Pwani","region_cod":6,"district_c":4,"district":"Mkuranga","code":"MKU","aa":"ranga","lga":"DC","zone":"Coast","x":39,"y":-7,"name":"Mkuranga"},{"lon":38,"lat":-8,"region_nam":"Pwani","region_cod":6,"district_c":5,"district":"Rufiji","code":"RUF","aa":"iji","lga":"DC","zone":"Coast","x":38,"y":-8,"name":"Rufiji"},{"lon":38,"lat":-5,"region_nam":"Tanga","region_cod":4,"district_c":6,"district":"Handeni","code":"HAN","aa":"deni","lga":"DC","zone":"Coast","x":38,"y":-5,"name":"Handeni"},{"lon":38,"lat":-5,"region_nam":"Tanga","region_cod":4,"district_c":10,"district":"Handeni","code":"HAN","aa":"deni","lga":"TC","zone":"Coast","x":38,"y":-5,"name":"Handeni"},{"lon":38,"lat":-6,"region_nam":"Tanga","region_cod":4,"district_c":7,"district":"Kilindi","code":"KIL","aa":"indi","lga":"DC","zone":"Coast","x":38,"y":-6,"name":"Kilindi"},{"lon":38,"lat":-5,"region_nam":"Tanga","region_cod":4,"district_c":2,"district":"Korogwe","code":"KOR","aa":"ogwe","lga":"DC","zone":"Coast","x":38,"y":-5,"name":"Korogwe"},{"lon":38,"lat":-5,"region_nam":"Tanga","region_cod":4,"district_c":9,"district":"Korogwe","code":"KOR","aa":"ogwe","lga":"TC","zone":"Coast","x":38,"y":-5,"name":"Korogwe"},{"lon":38,"lat":-4,"region_nam":"Tanga","region_cod":4,"district_c":1,"district":"Lushoto","code":"LUS","aa":"hoto","lga":"DC","zone":"Coast","x":38,"y":-4,"name":"Lushoto"},{"lon":39,"lat":-5,"region_nam":"Tanga","region_cod":4,"district_c":8,"district":"Mkinga","code":"MKI","aa":"nga","lga":"DC","zone":"Coast","x":39,"y":-5,"name":"Mkinga"},{"lon":39,"lat":-5,"region_nam":"Tanga","region_cod":4,"district_c":3,"district":"Muheza","code":"MUH","aa":"eza","lga":"DC","zone":"Coast","x":39,"y":-5,"name":"Muheza"},{"lon":39,"lat":-6,"region_nam":"Tanga","region_cod":4,"district_c":5,"district":"Pangani","code":"PAN","aa":"gani","lga":"DC","zone":"Coast","x":39,"y":-6,"name":"Pangani"},{"lon":39,"lat":-5,"region_nam":"Tanga","region_cod":4,"district_c":4,"district":"Tanga","code":"TAN","aa":"ga","lga":"CC","zone":"Coast","x":39,"y":-5,"name":"Tanga"},{"lon":38,"lat":-5,"region_nam":"Tanga","region_cod":4,"district_c":11,"district":"Bumbuli","code":"BUM","aa":"buli","lga":"DC","zone":"Coast","x":38,"y":-5,"name":"Bumbuli"},{"lon":39,"lat":-6,"region_nam":"Pwani","region_cod":6,"district_c":1,"district":"Bagamoyo","code":"BAG","aa":"amoyo","lga":"DC","zone":"Coast","x":39,"y":-6,"name":"Bagamoyo"},{"lon":37,"lat":-8,"region_nam":"Morogoro","region_cod":5,"district_c":9,"district":"Ifakara","code":"IFA","aa":"kara","lga":"TC","zone":"Coast","x":37,"y":-8,"name":"Ifakara"},{"lon":39,"lat":-8,"region_nam":"Pwani","region_cod":6,"district_c":8,"district":"Kibiti","code":"KIB","aa":"iti","lga":"DC","zone":"Coast","x":39,"y":-8,"name":"Kibiti"},{"lon":39,"lat":-7,"region_nam":"Dar-es-salaam","region_cod":7,"district_c":5,"district":"Kigamboni","code":"KIG","aa":"amboni","lga":"MC","zone":"Coast","x":39,"y":-7,"name":"Kigamboni"},{"lon":36,"lat":-9,"region_nam":"Morogoro","region_cod":5,"district_c":8,"district":"Malinyi","code":"MAL","aa":"inyi","lga":"DC","zone":"Coast","x":36,"y":-9,"name":"Malinyi"},{"lon":39,"lat":-7,"region_nam":"Dar-es-salaam","region_cod":7,"district_c":4,"district":"Ubungo","code":"UBU","aa":"ngo","lga":"MC","zone":"Coast","x":39,"y":-7,"name":"Ubungo"}],"type":"tilemap"},{"name":"Lake","data":[{"lon":32,"lat":-4,"region_nam":"Geita","region_cod":25,"district_c":4,"district":"Bukombe","code":"BUK","aa":"ombe","lga":"DC","zone":"Lake","x":32,"y":-4,"name":"Bukombe"},{"lon":32,"lat":-3,"region_nam":"Geita","region_cod":25,"district_c":5,"district":"Chato","code":"CHA","aa":"to","lga":"DC","zone":"Lake","x":32,"y":-3,"name":"Chato"},{"lon":32,"lat":-3,"region_nam":"Geita","region_cod":25,"district_c":1,"district":"Geita","code":"GEI","aa":"ta","lga":"DC","zone":"Lake","x":32,"y":-3,"name":"Geita"},{"lon":32,"lat":-3,"region_nam":"Geita","region_cod":25,"district_c":3,"district":"Mbogwe","code":"MBO","aa":"gwe","lga":"DC","zone":"Lake","x":32,"y":-3,"name":"Mbogwe"},{"lon":33,"lat":-3,"region_nam":"Geita","region_cod":25,"district_c":2,"district":"Nyang'wale","code":"NYA","aa":"ng'wale","lga":"DC","zone":"Lake","x":33,"y":-3,"name":"Nyang'wale"},{"lon":31,"lat":-3,"region_nam":"Kagera","region_cod":18,"district_c":4,"district":"Biharamulo","code":"BIH","aa":"aramulo","lga":"DC","zone":"Lake","x":31,"y":-3,"name":"Biharamulo"},{"lon":32,"lat":-1,"region_nam":"Kagera","region_cod":18,"district_c":2,"district":"Bukoba","code":"BUK","aa":"oba","lga":"DC","zone":"Lake","x":32,"y":-1,"name":"Bukoba"},{"lon":32,"lat":-1,"region_nam":"Kagera","region_cod":18,"district_c":6,"district":"Bukoba","code":"BUK","aa":"oba","lga":"MC","zone":"Lake","x":32,"y":-1,"name":"Bukoba"},{"lon":31,"lat":-2,"region_nam":"Kagera","region_cod":18,"district_c":1,"district":"Karagwe","code":"KAR","aa":"agwe","lga":"DC","zone":"Lake","x":31,"y":-2,"name":"Karagwe"},{"lon":31,"lat":-1,"region_nam":"Kagera","region_cod":18,"district_c":8,"district":"Kyerwa","code":"KYE","aa":"rwa","lga":"DC","zone":"Lake","x":31,"y":-1,"name":"Kyerwa"},{"lon":31,"lat":-1,"region_nam":"Kagera","region_cod":18,"district_c":7,"district":"Missenyi","code":"MIS","aa":"senyi","lga":"DC","zone":"Lake","x":31,"y":-1,"name":"Missenyi"},{"lon":32,"lat":-2,"region_nam":"Kagera","region_cod":18,"district_c":3,"district":"Muleba","code":"MUL","aa":"eba","lga":"DC","zone":"Lake","x":32,"y":-2,"name":"Muleba"},{"lon":31,"lat":-3,"region_nam":"Kagera","region_cod":18,"district_c":5,"district":"Ngara","code":"NGA","aa":"ra","lga":"DC","zone":"Lake","x":31,"y":-3,"name":"Ngara"},{"lon":32,"lat":-6,"region_nam":"Katavi","region_cod":23,"district_c":3,"district":"Mlele","code":"MLE","aa":"le","lga":"DC","zone":"Lake","x":32,"y":-6,"name":"Mlele"},{"lon":31,"lat":-6,"region_nam":"Katavi","region_cod":23,"district_c":2,"district":"Mpanda","code":"MPA","aa":"nda","lga":"DC","zone":"Lake","x":31,"y":-6,"name":"Mpanda"},{"lon":31,"lat":-6,"region_nam":"Katavi","region_cod":23,"district_c":1,"district":"Mpanda","code":"MPA","aa":"nda","lga":"MC","zone":"Lake","x":31,"y":-6,"name":"Mpanda"},{"lon":30,"lat":-4,"region_nam":"Kigoma","region_cod":16,"district_c":6,"district":"Buhigwe","code":"BUH","aa":"igwe","lga":"DC","zone":"Lake","x":30,"y":-4,"name":"Buhigwe"},{"lon":31,"lat":-3,"region_nam":"Kigoma","region_cod":16,"district_c":7,"district":"Kakonko","code":"KAK","aa":"onko","lga":"DC","zone":"Lake","x":31,"y":-3,"name":"Kakonko"},{"lon":30,"lat":-4,"region_nam":"Kigoma","region_cod":16,"district_c":2,"district":"Kasulu","code":"KAS","aa":"ulu","lga":"DC","zone":"Lake","x":30,"y":-4,"name":"Kasulu"},{"lon":30,"lat":-5,"region_nam":"Kigoma","region_cod":16,"district_c":8,"district":"Kasulu","code":"KAS","aa":"ulu","lga":"TC","zone":"Lake","x":30,"y":-5,"name":"Kasulu"},{"lon":31,"lat":-4,"region_nam":"Kigoma","region_cod":16,"district_c":1,"district":"Kibondo","code":"KIB","aa":"ondo","lga":"DC","zone":"Lake","x":31,"y":-4,"name":"Kibondo"},{"lon":30,"lat":-5,"region_nam":"Kigoma","region_cod":16,"district_c":4,"district":"Kigoma","code":"KIG","aa":"oma","lga":"MC","zone":"Lake","x":30,"y":-5,"name":"Kigoma"},{"lon":30,"lat":-5,"region_nam":"Kigoma","region_cod":16,"district_c":3,"district":"Kigoma","code":"KIG","aa":"oma","lga":"DC","zone":"Lake","x":30,"y":-5,"name":"Kigoma"},{"lon":30,"lat":-6,"region_nam":"Kigoma","region_cod":16,"district_c":5,"district":"Uvinza","code":"UVI","aa":"nza","lga":"DC","zone":"Lake","x":30,"y":-6,"name":"Uvinza"},{"lon":33,"lat":-2,"region_nam":"Mara","region_cod":20,"district_c":4,"district":"Bunda","code":"BUN","aa":"da","lga":"DC","zone":"Lake","x":33,"y":-2,"name":"Bunda"},{"lon":34,"lat":-2,"region_nam":"Mara","region_cod":20,"district_c":3,"district":"Musoma","code":"MUS","aa":"oma","lga":"DC","zone":"Lake","x":34,"y":-2,"name":"Musoma"},{"lon":34,"lat":-2,"region_nam":"Mara","region_cod":20,"district_c":5,"district":"Musoma","code":"MUS","aa":"oma","lga":"MC","zone":"Lake","x":34,"y":-2,"name":"Musoma"},{"lon":34,"lat":-1,"region_nam":"Mara","region_cod":20,"district_c":6,"district":"Rorya","code":"ROR","aa":"ya","lga":"DC","zone":"Lake","x":34,"y":-1,"name":"Rorya"},{"lon":35,"lat":-2,"region_nam":"Mara","region_cod":20,"district_c":2,"district":"Serengeti","code":"SER","aa":"engeti","lga":"DC","zone":"Lake","x":35,"y":-2,"name":"Serengeti"},{"lon":35,"lat":-1,"region_nam":"Mara","region_cod":20,"district_c":1,"district":"Tarime","code":"TAR","aa":"ime","lga":"DC","zone":"Lake","x":35,"y":-1,"name":"Tarime"},{"lon":33,"lat":-2,"region_nam":"Mwanza","region_cod":19,"district_c":6,"district":"Ilemela","code":"ILE","aa":"mela","lga":"MC","zone":"Lake","x":33,"y":-2,"name":"Ilemela"},{"lon":33,"lat":-3,"region_nam":"Mwanza","region_cod":19,"district_c":4,"district":"Kwimba","code":"KWI","aa":"mba","lga":"DC","zone":"Lake","x":33,"y":-3,"name":"Kwimba"},{"lon":33,"lat":-3,"region_nam":"Mwanza","region_cod":19,"district_c":2,"district":"Magu","code":"MAG","aa":"u","lga":"DC","zone":"Lake","x":33,"y":-3,"name":"Magu"},{"lon":33,"lat":-3,"region_nam":"Mwanza","region_cod":19,"district_c":7,"district":"Misungwi","code":"MIS","aa":"ungwi","lga":"DC","zone":"Lake","x":33,"y":-3,"name":"Misungwi"},{"lon":33,"lat":-3,"region_nam":"Mwanza","region_cod":19,"district_c":3,"district":"Mwanza","code":"MWA","aa":"nza","lga":"CC","zone":"Lake","x":33,"y":-3,"name":"Mwanza"},{"lon":33,"lat":-3,"region_nam":"Mwanza","region_cod":19,"district_c":5,"district":"Sengerema","code":"SEN","aa":"gerema","lga":"DC","zone":"Lake","x":33,"y":-3,"name":"Sengerema"},{"lon":33,"lat":-2,"region_nam":"Mwanza","region_cod":19,"district_c":1,"district":"Ukerewe","code":"UKE","aa":"rewe","lga":"DC","zone":"Lake","x":33,"y":-2,"name":"Ukerewe"},{"lon":33,"lat":-4,"region_nam":"Shinyanga","region_cod":17,"district_c":4,"district":"Msalala","code":"MSA","aa":"lala","lga":"DC","zone":"Lake","x":33,"y":-4,"name":"Msalala"},{"lon":33,"lat":-4,"region_nam":"Shinyanga","region_cod":17,"district_c":5,"district":"Kahama","code":"KAH","aa":"ama","lga":"MC","zone":"Lake","x":33,"y":-4,"name":"Kahama"},{"lon":34,"lat":-4,"region_nam":"Shinyanga","region_cod":17,"district_c":2,"district":"Kishapu","code":"KIS","aa":"hapu","lga":"DC","zone":"Lake","x":34,"y":-4,"name":"Kishapu"},{"lon":33,"lat":-4,"region_nam":"Shinyanga","region_cod":17,"district_c":3,"district":"Shinyanga","code":"SHI","aa":"nyanga","lga":"DC","zone":"Lake","x":33,"y":-4,"name":"Shinyanga"},{"lon":33,"lat":-4,"region_nam":"Shinyanga","region_cod":17,"district_c":1,"district":"Shinyanga","code":"SHI","aa":"nyanga","lga":"MC","zone":"Lake","x":33,"y":-4,"name":"Shinyanga"},{"lon":35,"lat":-3,"region_nam":"Simiyu","region_cod":24,"district_c":1,"district":"Bariadi","code":"BAR","aa":"iadi","lga":"DC","zone":"Lake","x":35,"y":-3,"name":"Bariadi"},{"lon":34,"lat":-2,"region_nam":"Simiyu","region_cod":24,"district_c":5,"district":"Busega","code":"BUS","aa":"ega","lga":"DC","zone":"Lake","x":34,"y":-2,"name":"Busega"},{"lon":35,"lat":-3,"region_nam":"Simiyu","region_cod":24,"district_c":2,"district":"Itilima","code":"ITI","aa":"lima","lga":"DC","zone":"Lake","x":35,"y":-3,"name":"Itilima"},{"lon":34,"lat":-3,"region_nam":"Simiyu","region_cod":24,"district_c":4,"district":"Maswa","code":"MAS","aa":"wa","lga":"DC","zone":"Lake","x":34,"y":-3,"name":"Maswa"},{"lon":34,"lat":-4,"region_nam":"Simiyu","region_cod":24,"district_c":3,"district":"Meatu","code":"MEA","aa":"tu","lga":"DC","zone":"Lake","x":34,"y":-4,"name":"Meatu"},{"lon":34,"lat":-4,"region_nam":"Tabora","region_cod":14,"district_c":2,"district":"Igunga","code":"IGU","aa":"nga","lga":"DC","zone":"Lake","x":34,"y":-4,"name":"Igunga"},{"lon":32,"lat":-5,"region_nam":"Tabora","region_cod":14,"district_c":7,"district":"Kaliua","code":"KAL","aa":"iua","lga":"DC","zone":"Lake","x":32,"y":-5,"name":"Kaliua"},{"lon":33,"lat":-4,"region_nam":"Tabora","region_cod":14,"district_c":1,"district":"Nzega","code":"NZE","aa":"ga","lga":"DC","zone":"Lake","x":33,"y":-4,"name":"Nzega"},{"lon":33,"lat":-6,"region_nam":"Tabora","region_cod":14,"district_c":5,"district":"Sikonge","code":"SIK","aa":"onge","lga":"DC","zone":"Lake","x":33,"y":-6,"name":"Sikonge"},{"lon":33,"lat":-5,"region_nam":"Tabora","region_cod":14,"district_c":6,"district":"Tabora","code":"TAB","aa":"ora","lga":"MC","zone":"Lake","x":33,"y":-5,"name":"Tabora"},{"lon":32,"lat":-5,"region_nam":"Tabora","region_cod":14,"district_c":4,"district":"Urambo","code":"URA","aa":"mbo","lga":"DC","zone":"Lake","x":32,"y":-5,"name":"Urambo"},{"lon":33,"lat":-5,"region_nam":"Tabora","region_cod":14,"district_c":3,"district":"Uyui","code":"UYU","aa":"i","lga":"DC","zone":"Lake","x":33,"y":-5,"name":"Uyui"},{"lon":34,"lat":-3,"region_nam":"Simiyu","region_cod":24,"district_c":6,"district":"Bariadi","code":"BAR","aa":"iadi","lga":"TC","zone":"Lake","x":34,"y":-3,"name":"Bariadi"},{"lon":32,"lat":-2,"region_nam":"Mwanza","region_cod":19,"district_c":8,"district":"Buchosa","code":"BUC","aa":"hosa","lga":"DC","zone":"Lake","x":32,"y":-2,"name":"Buchosa"},{"lon":34,"lat":-2,"region_nam":"Mara","region_cod":20,"district_c":8,"district":"Bunda","code":"BUN","aa":"da","lga":"TC","zone":"Lake","x":34,"y":-2,"name":"Bunda"},{"lon":32,"lat":-3,"region_nam":"Geita","region_cod":25,"district_c":6,"district":"Geita","code":"GEI","aa":"ta","lga":"TC","zone":"Lake","x":32,"y":-3,"name":"Geita"},{"lon":32,"lat":-4,"region_nam":"Shinyanga","region_cod":17,"district_c":6,"district":"Ushetu","code":"USH","aa":"etu","lga":"DC","zone":"Lake","x":32,"y":-4,"name":"Ushetu"},{"lon":32,"lat":-7,"region_nam":"Katavi","region_cod":23,"district_c":4,"district":"Mpimbwe","code":"MPI","aa":"mbwe","lga":"DC","zone":"Lake","x":32,"y":-7,"name":"Mpimbwe"},{"lon":31,"lat":-6,"region_nam":"Katavi","region_cod":23,"district_c":5,"district":"Nsimbo","code":"NSI","aa":"mbo","lga":"DC","zone":"Lake","x":31,"y":-6,"name":"Nsimbo"},{"lon":33,"lat":-4,"region_nam":"Tabora","region_cod":14,"district_c":8,"district":"Nzega","code":"NZE","aa":"ga","lga":"TC","zone":"Lake","x":33,"y":-4,"name":"Nzega"},{"lon":34,"lat":-1,"region_nam":"Mara","region_cod":20,"district_c":9,"district":"Tarime","code":"TAR","aa":"ime","lga":"TC","zone":"Lake","x":34,"y":-1,"name":"Tarime"},{"lon":34,"lat":-2,"region_nam":"Mara","region_cod":20,"district_c":7,"district":"Butiama","code":"BUT","aa":"iama","lga":"DC","zone":"Lake","x":34,"y":-2,"name":"Butiama"}],"type":"tilemap"},{"name":"Northern","data":[{"lon":37,"lat":-4,"region_nam":"Arusha","region_cod":2,"district_c":6,"district":"Arusha","code":"ARU","aa":"sha","lga":"DC","zone":"Northern","x":37,"y":-4,"name":"Arusha"},{"lon":37,"lat":-3,"region_nam":"Arusha","region_cod":2,"district_c":3,"district":"Arusha","code":"ARU","aa":"sha","lga":"CC","zone":"Northern","x":37,"y":-3,"name":"Arusha"},{"lon":36,"lat":-3,"region_nam":"Arusha","region_cod":2,"district_c":4,"district":"Karatu","code":"KAR","aa":"atu","lga":"DC","zone":"Northern","x":36,"y":-3,"name":"Karatu"},{"lon":36,"lat":-3,"region_nam":"Arusha","region_cod":2,"district_c":7,"district":"Longido","code":"LON","aa":"gido","lga":"DC","zone":"Northern","x":36,"y":-3,"name":"Longido"},{"lon":37,"lat":-3,"region_nam":"Arusha","region_cod":2,"district_c":2,"district":"Meru","code":"MER","aa":"u","lga":"DC","zone":"Northern","x":37,"y":-3,"name":"Meru"},{"lon":36,"lat":-3,"region_nam":"Arusha","region_cod":2,"district_c":1,"district":"Monduli","code":"MON","aa":"duli","lga":"DC","zone":"Northern","x":36,"y":-3,"name":"Monduli"},{"lon":36,"lat":-3,"region_nam":"Arusha","region_cod":2,"district_c":5,"district":"Ngorongoro","code":"NGO","aa":"rongoro","lga":"DC","zone":"Northern","x":36,"y":-3,"name":"Ngorongoro"},{"lon":37,"lat":-3,"region_nam":"Kilimanjaro","region_cod":3,"district_c":5,"district":"Hai","code":"HAI","aa":"","lga":"DC","zone":"Northern","x":37,"y":-3,"name":"Hai"},{"lon":37,"lat":-3,"region_nam":"Kilimanjaro","region_cod":3,"district_c":4,"district":"Moshi","code":"MOS","aa":"hi","lga":"DC","zone":"Northern","x":37,"y":-3,"name":"Moshi"},{"lon":37,"lat":-3,"region_nam":"Kilimanjaro","region_cod":3,"district_c":6,"district":"Moshi","code":"MOS","aa":"hi","lga":"MC","zone":"Northern","x":37,"y":-3,"name":"Moshi"},{"lon":38,"lat":-4,"region_nam":"Kilimanjaro","region_cod":3,"district_c":2,"district":"Mwanga","code":"MWA","aa":"nga","lga":"DC","zone":"Northern","x":38,"y":-4,"name":"Mwanga"},{"lon":38,"lat":-3,"region_nam":"Kilimanjaro","region_cod":3,"district_c":1,"district":"Rombo","code":"ROM","aa":"bo","lga":"DC","zone":"Northern","x":38,"y":-3,"name":"Rombo"},{"lon":38,"lat":-4,"region_nam":"Kilimanjaro","region_cod":3,"district_c":3,"district":"Same","code":"SAM","aa":"e","lga":"DC","zone":"Northern","x":38,"y":-4,"name":"Same"},{"lon":37,"lat":-3,"region_nam":"Kilimanjaro","region_cod":3,"district_c":7,"district":"Siha","code":"SIH","aa":"a","lga":"DC","zone":"Northern","x":37,"y":-3,"name":"Siha"},{"lon":36,"lat":-4,"region_nam":"Manyara","region_cod":21,"district_c":1,"district":"Babati","code":"BAB","aa":"ati","lga":"DC","zone":"Northern","x":36,"y":-4,"name":"Babati"},{"lon":36,"lat":-4,"region_nam":"Manyara","region_cod":21,"district_c":6,"district":"Babati","code":"BAB","aa":"ati","lga":"TC","zone":"Northern","x":36,"y":-4,"name":"Babati"},{"lon":35,"lat":-5,"region_nam":"Manyara","region_cod":21,"district_c":2,"district":"Hanang","code":"HAN","aa":"ang","lga":"DC","zone":"Northern","x":35,"y":-5,"name":"Hanang"},{"lon":37,"lat":-5,"region_nam":"Manyara","region_cod":21,"district_c":5,"district":"Kiteto","code":"KIT","aa":"eto","lga":"DC","zone":"Northern","x":37,"y":-5,"name":"Kiteto"},{"lon":35,"lat":-4,"region_nam":"Manyara","region_cod":21,"district_c":3,"district":"Mbulu","code":"MBU","aa":"lu","lga":"DC","zone":"Northern","x":35,"y":-4,"name":"Mbulu"},{"lon":37,"lat":-4,"region_nam":"Manyara","region_cod":21,"district_c":4,"district":"Simanjiro","code":"SIM","aa":"anjiro","lga":"DC","zone":"Northern","x":37,"y":-4,"name":"Simanjiro"},{"lon":36,"lat":-4,"region_nam":"Manyara","region_cod":21,"district_c":7,"district":"Mbulu","code":"MBU","aa":"lu","lga":"TC","zone":"Northern","x":36,"y":-4,"name":"Mbulu"}],"type":"tilemap"},{"name":"Southern","data":[{"lon":39,"lat":-9,"region_nam":"Lindi","region_cod":8,"district_c":1,"district":"Kilwa","code":"KIL","aa":"wa","lga":"DC","zone":"Southern","x":39,"y":-9,"name":"Kilwa"},{"lon":39,"lat":-10,"region_nam":"Lindi","region_cod":8,"district_c":2,"district":"Lindi","code":"LIN","aa":"di","lga":"DC","zone":"Southern","x":39,"y":-10,"name":"Lindi"},{"lon":40,"lat":-10,"region_nam":"Lindi","region_cod":8,"district_c":6,"district":"Lindi","code":"LIN","aa":"di","lga":"MC","zone":"Southern","x":40,"y":-10,"name":"Lindi"},{"lon":38,"lat":-9,"region_nam":"Lindi","region_cod":8,"district_c":4,"district":"Liwale","code":"LIW","aa":"ale","lga":"DC","zone":"Southern","x":38,"y":-9,"name":"Liwale"},{"lon":38,"lat":-10,"region_nam":"Lindi","region_cod":8,"district_c":3,"district":"Nachingwea","code":"NAC","aa":"hingwea","lga":"DC","zone":"Southern","x":38,"y":-10,"name":"Nachingwea"},{"lon":39,"lat":-10,"region_nam":"Lindi","region_cod":8,"district_c":5,"district":"Ruangwa","code":"RUA","aa":"ngwa","lga":"DC","zone":"Southern","x":39,"y":-10,"name":"Ruangwa"},{"lon":39,"lat":-11,"region_nam":"Mtwara","region_cod":9,"district_c":3,"district":"Masasi","code":"MAS","aa":"asi","lga":"DC","zone":"Southern","x":39,"y":-11,"name":"Masasi"},{"lon":39,"lat":-11,"region_nam":"Mtwara","region_cod":9,"district_c":7,"district":"Masasi","code":"MAS","aa":"asi","lga":"TC","zone":"Southern","x":39,"y":-11,"name":"Masasi"},{"lon":40,"lat":-10,"region_nam":"Mtwara","region_cod":9,"district_c":1,"district":"Mtwara","code":"MTW","aa":"ara","lga":"DC","zone":"Southern","x":40,"y":-10,"name":"Mtwara"},{"lon":40,"lat":-10,"region_nam":"Mtwara","region_cod":9,"district_c":5,"district":"Mtwara","code":"MTW","aa":"ara","lga":"MC","zone":"Southern","x":40,"y":-10,"name":"Mtwara"},{"lon":38,"lat":-11,"region_nam":"Mtwara","region_cod":9,"district_c":6,"district":"Nanyumbu","code":"NAN","aa":"yumbu","lga":"DC","zone":"Southern","x":38,"y":-11,"name":"Nanyumbu"},{"lon":39,"lat":-11,"region_nam":"Mtwara","region_cod":9,"district_c":2,"district":"Newala","code":"NEW","aa":"ala","lga":"DC","zone":"Southern","x":39,"y":-11,"name":"Newala"},{"lon":40,"lat":-11,"region_nam":"Mtwara","region_cod":9,"district_c":4,"district":"Tandahimba","code":"TAN","aa":"dahimba","lga":"DC","zone":"Southern","x":40,"y":-11,"name":"Tandahimba"},{"lon":40,"lat":-11,"region_nam":"Mtwara","region_cod":9,"district_c":8,"district":"Nanyamba","code":"NAN","aa":"yamba","lga":"TC","zone":"Southern","x":40,"y":-11,"name":"Nanyamba"},{"lon":39,"lat":-11,"region_nam":"Mtwara","region_cod":9,"district_c":9,"district":"Newala","code":"NEW","aa":"ala","lga":"TC","zone":"Southern","x":39,"y":-11,"name":"Newala"}],"type":"tilemap"},{"name":"Southern Highland","data":[{"lon":35,"lat":-8,"region_nam":"Iringa","region_cod":11,"district_c":1,"district":"Iringa","code":"IRI","aa":"nga","lga":"DC","zone":"Southern Highland","x":35,"y":-8,"name":"Iringa"},{"lon":36,"lat":-8,"region_nam":"Iringa","region_cod":11,"district_c":3,"district":"Iringa","code":"IRI","aa":"nga","lga":"MC","zone":"Southern Highland","x":36,"y":-8,"name":"Iringa"},{"lon":36,"lat":-8,"region_nam":"Iringa","region_cod":11,"district_c":4,"district":"Kilolo","code":"KIL","aa":"olo","lga":"DC","zone":"Southern Highland","x":36,"y":-8,"name":"Kilolo"},{"lon":35,"lat":-8,"region_nam":"Iringa","region_cod":11,"district_c":5,"district":"Mafinga","code":"MAF","aa":"inga","lga":"TC","zone":"Southern Highland","x":35,"y":-8,"name":"Mafinga"},{"lon":35,"lat":-9,"region_nam":"Iringa","region_cod":11,"district_c":2,"district":"Mufindi","code":"MUF","aa":"indi","lga":"DC","zone":"Southern Highland","x":35,"y":-9,"name":"Mufindi"},{"lon":33,"lat":-8,"region_nam":"Mbeya","region_cod":12,"district_c":1,"district":"Chunya","code":"CHU","aa":"nya","lga":"DC","zone":"Southern Highland","x":33,"y":-8,"name":"Chunya"},{"lon":33,"lat":-9,"region_nam":"Songwe","region_cod":26,"district_c":1,"district":"Ileje","code":"ILE","aa":"je","lga":"DC","zone":"Southern Highland","x":33,"y":-9,"name":"Ileje"},{"lon":34,"lat":-10,"region_nam":"Mbeya","region_cod":12,"district_c":3,"district":"Kyela","code":"KYE","aa":"la","lga":"DC","zone":"Southern Highland","x":34,"y":-10,"name":"Kyela"},{"lon":34,"lat":-8,"region_nam":"Mbeya","region_cod":12,"district_c":6,"district":"Mbarali","code":"MBA","aa":"rali","lga":"DC","zone":"Southern Highland","x":34,"y":-8,"name":"Mbarali"},{"lon":33,"lat":-9,"region_nam":"Mbeya","region_cod":12,"district_c":2,"district":"Mbeya","code":"MBE","aa":"ya","lga":"DC","zone":"Southern Highland","x":33,"y":-9,"name":"Mbeya"},{"lon":33,"lat":-9,"region_nam":"Mbeya","region_cod":12,"district_c":5,"district":"Mbeya","code":"MBE","aa":"ya","lga":"CC","zone":"Southern Highland","x":33,"y":-9,"name":"Mbeya"},{"lon":33,"lat":-9,"region_nam":"Songwe","region_cod":26,"district_c":2,"district":"Mbozi","code":"MBO","aa":"zi","lga":"DC","zone":"Southern Highland","x":33,"y":-9,"name":"Mbozi"},{"lon":32,"lat":-9,"region_nam":"Songwe","region_cod":26,"district_c":3,"district":"Momba","code":"MOM","aa":"ba","lga":"DC","zone":"Southern Highland","x":32,"y":-9,"name":"Momba"},{"lon":34,"lat":-9,"region_nam":"Mbeya","region_cod":12,"district_c":4,"district":"Rungwe","code":"RUN","aa":"gwe","lga":"DC","zone":"Southern Highland","x":34,"y":-9,"name":"Rungwe"},{"lon":33,"lat":-9,"region_nam":"Songwe","region_cod":26,"district_c":4,"district":"Tunduma","code":"TUN","aa":"duma","lga":"TC","zone":"Southern Highland","x":33,"y":-9,"name":"Tunduma"},{"lon":35,"lat":-10,"region_nam":"Njombe","region_cod":22,"district_c":5,"district":"Ludewa","code":"LUD","aa":"ewa","lga":"DC","zone":"Southern Highland","x":35,"y":-10,"name":"Ludewa"},{"lon":35,"lat":-9,"region_nam":"Njombe","region_cod":22,"district_c":6,"district":"Makambako","code":"MAK","aa":"ambako","lga":"TC","zone":"Southern Highland","x":35,"y":-9,"name":"Makambako"},{"lon":34,"lat":-9,"region_nam":"Njombe","region_cod":22,"district_c":3,"district":"Makete","code":"MAK","aa":"ete","lga":"DC","zone":"Southern Highland","x":34,"y":-9,"name":"Makete"},{"lon":35,"lat":-9,"region_nam":"Njombe","region_cod":22,"district_c":4,"district":"Njombe","code":"NJO","aa":"mbe","lga":"DC","zone":"Southern Highland","x":35,"y":-9,"name":"Njombe"},{"lon":35,"lat":-9,"region_nam":"Njombe","region_cod":22,"district_c":1,"district":"Njombe","code":"NJO","aa":"mbe","lga":"TC","zone":"Southern Highland","x":35,"y":-9,"name":"Njombe"},{"lon":35,"lat":-9,"region_nam":"Njombe","region_cod":22,"district_c":2,"district":"Wanging'ombe","code":"WAN","aa":"ging'ombe","lga":"DC","zone":"Southern Highland","x":35,"y":-9,"name":"Wanging'ombe"},{"lon":32,"lat":-9,"region_nam":"Rukwa","region_cod":15,"district_c":1,"district":"Kalambo","code":"KAL","aa":"ambo","lga":"DC","zone":"Southern Highland","x":32,"y":-9,"name":"Kalambo"},{"lon":31,"lat":-8,"region_nam":"Rukwa","region_cod":15,"district_c":3,"district":"Nkasi","code":"NKA","aa":"si","lga":"DC","zone":"Southern Highland","x":31,"y":-8,"name":"Nkasi"},{"lon":32,"lat":-8,"region_nam":"Rukwa","region_cod":15,"district_c":2,"district":"Sumbawanga","code":"SUM","aa":"bawanga","lga":"DC","zone":"Southern Highland","x":32,"y":-8,"name":"Sumbawanga"},{"lon":32,"lat":-8,"region_nam":"Rukwa","region_cod":15,"district_c":4,"district":"Sumbawanga","code":"SUM","aa":"bawanga","lga":"MC","zone":"Southern Highland","x":32,"y":-8,"name":"Sumbawanga"},{"lon":35,"lat":-11,"region_nam":"Ruvuma","region_cod":10,"district_c":3,"district":"Mbinga","code":"MBI","aa":"nga","lga":"DC","zone":"Southern Highland","x":35,"y":-11,"name":"Mbinga"},{"lon":36,"lat":-11,"region_nam":"Ruvuma","region_cod":10,"district_c":5,"district":"Namtumbo","code":"NAM","aa":"tumbo","lga":"DC","zone":"Southern Highland","x":36,"y":-11,"name":"Namtumbo"},{"lon":35,"lat":-11,"region_nam":"Ruvuma","region_cod":10,"district_c":6,"district":"Nyasa","code":"NYA","aa":"sa","lga":"DC","zone":"Southern Highland","x":35,"y":-11,"name":"Nyasa"},{"lon":36,"lat":-11,"region_nam":"Ruvuma","region_cod":10,"district_c":2,"district":"Songea","code":"SON","aa":"gea","lga":"DC","zone":"Southern Highland","x":36,"y":-11,"name":"Songea"},{"lon":36,"lat":-11,"region_nam":"Ruvuma","region_cod":10,"district_c":4,"district":"Songea","code":"SON","aa":"gea","lga":"MC","zone":"Southern Highland","x":36,"y":-11,"name":"Songea"},{"lon":37,"lat":-11,"region_nam":"Ruvuma","region_cod":10,"district_c":1,"district":"Tunduru","code":"TUN","aa":"duru","lga":"DC","zone":"Southern Highland","x":37,"y":-11,"name":"Tunduru"},{"lon":34,"lat":-9,"region_nam":"Mbeya","region_cod":12,"district_c":7,"district":"Busokelo","code":"BUS","aa":"okelo","lga":"DC","zone":"Southern Highland","x":34,"y":-9,"name":"Busokelo"},{"lon":35,"lat":-10,"region_nam":"Ruvuma","region_cod":10,"district_c":7,"district":"Madaba","code":"MAD","aa":"aba","lga":"DC","zone":"Southern Highland","x":35,"y":-10,"name":"Madaba"},{"lon":35,"lat":-11,"region_nam":"Ruvuma","region_cod":10,"district_c":8,"district":"Mbinga","code":"MBI","aa":"nga","lga":"TC","zone":"Southern Highland","x":35,"y":-11,"name":"Mbinga"},{"lon":33,"lat":-8,"region_nam":"Songwe","region_cod":26,"district_c":5,"district":"Songwe","code":"SON","aa":"gwe","lga":"DC","zone":"Southern Highland","x":33,"y":-8,"name":"Songwe"}],"type":"tilemap"}],"xAxis":{"type":"linear","title":{"text":"lon"},"visible":false},"tooltip":{"headerFormat":"","pointFormat":"<b>{point.name}<\/b> is in <b>{point.region_nam}<\/b>"}},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"◁ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="packedbubble" class="level2">
<h2 class="anchored" data-anchor-id="packedbubble">packedbubble</h2>
<p>A bubble chart requires three dimensions of data; the x-value and y-value to position the bubble along the value axes and a third value for its volume. Packed Bubble charts have a simpler data structure, a flat, one-dimensional array with volumes is sufficient. The bubble’s x/y position is automatically calculated using an algorithm that packs the bubbles in a cluster. The series data point configuration has support for setting colors and label values. Drag’n drop feature was also added to give the user a chance to quickly move one bubble between series and then check how their relations will change.</p>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">walimu.lga <span class="ot" style="color: #003B4F;">=</span> walimu.clean <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb4-2">  <span class="fu" style="color: #4758AB;">separate</span>(halmashauri, <span class="at" style="color: #657422;">into =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"district"</span>, <span class="st" style="color: #20794D;">"b"</span>, <span class="st" style="color: #20794D;">"c"</span>), <span class="at" style="color: #657422;">sep =</span> <span class="st" style="color: #20794D;">" "</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb4-3">  <span class="fu" style="color: #4758AB;">unite</span>(<span class="at" style="color: #657422;">col =</span> code, b<span class="sc" style="color: #5E5E5E;">:</span>c, <span class="at" style="color: #657422;">sep =</span> <span class="st" style="color: #20794D;">" "</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb4-4">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">lga =</span> <span class="fu" style="color: #4758AB;">case_when</span>(code <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"District Council"</span><span class="sc" style="color: #5E5E5E;">~</span><span class="st" style="color: #20794D;">"DC"</span>,</span>
<span id="cb4-5">                         code <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"Municipal Council"</span><span class="sc" style="color: #5E5E5E;">~</span><span class="st" style="color: #20794D;">"MC"</span>,</span>
<span id="cb4-6">                         code <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"City Council"</span><span class="sc" style="color: #5E5E5E;">~</span><span class="st" style="color: #20794D;">"CC"</span>,</span>
<span id="cb4-7">                         code <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"Town Council"</span><span class="sc" style="color: #5E5E5E;">~</span><span class="st" style="color: #20794D;">"TC"</span>,</span>
<span id="cb4-8">                         code <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"Mikindani Municipal"</span><span class="sc" style="color: #5E5E5E;">~</span><span class="st" style="color: #20794D;">"MC"</span>,</span>
<span id="cb4-9">                         code <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"Ujiji Municipal"</span><span class="sc" style="color: #5E5E5E;">~</span><span class="st" style="color: #20794D;">"MC"</span>))</span>
<span id="cb4-10"></span>
<span id="cb4-11">  </span>
<span id="cb4-12">walimu.lga.freq <span class="ot" style="color: #003B4F;">=</span> walimu.lga <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb4-13">  <span class="fu" style="color: #4758AB;">group_by</span>(district, lga) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb4-14">  <span class="fu" style="color: #4758AB;">count</span>()</span>
<span id="cb4-15"></span>
<span id="cb4-16">district.walimu <span class="ot" style="color: #003B4F;">=</span> district.tb <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb4-17">  <span class="fu" style="color: #4758AB;">left_join</span>(walimu.lga.freq) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb4-18">  <span class="fu" style="color: #4758AB;">select</span>(region_nam, zone, n, district)<span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb4-19">  <span class="fu" style="color: #4758AB;">separate</span>(district, <span class="at" style="color: #657422;">into =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"code"</span>, <span class="st" style="color: #20794D;">"aa"</span>), <span class="at" style="color: #657422;">sep =</span> <span class="dv" style="color: #AD0000;">3</span>, <span class="at" style="color: #657422;">remove =</span> <span class="cn" style="color: #8f5902;">FALSE</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb4-20">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">code =</span> <span class="fu" style="color: #4758AB;">str_to_upper</span>(code)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb4-21">  <span class="fu" style="color: #4758AB;">select</span>(<span class="sc" style="color: #5E5E5E;">-</span>aa)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">hc <span class="ot" style="color: #003B4F;">=</span> district.walimu <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb5-2">   <span class="fu" style="color: #4758AB;">hchart</span>(<span class="at" style="color: #657422;">type =</span> <span class="st" style="color: #20794D;">"packedbubble"</span>, <span class="fu" style="color: #4758AB;">hcaes</span>(<span class="at" style="color: #657422;">name =</span> district, <span class="at" style="color: #657422;">value =</span> n, <span class="at" style="color: #657422;">group =</span> zone))</span>
<span id="cb5-3"></span>
<span id="cb5-4"></span>
<span id="cb5-5"></span>
<span id="cb5-6">q95 <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">as.numeric</span>(<span class="fu" style="color: #4758AB;">quantile</span>(district.walimu<span class="sc" style="color: #5E5E5E;">$</span>n, .<span class="dv" style="color: #AD0000;">95</span>, <span class="at" style="color: #657422;">na.rm =</span> <span class="cn" style="color: #8f5902;">TRUE</span>))</span>
<span id="cb5-7"></span>
<span id="cb5-8">hc <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb5-9">  <span class="fu" style="color: #4758AB;">hc_tooltip</span>(</span>
<span id="cb5-10">    <span class="at" style="color: #657422;">useHTML =</span> <span class="cn" style="color: #8f5902;">TRUE</span>,</span>
<span id="cb5-11">    <span class="at" style="color: #657422;">pointFormat =</span> <span class="st" style="color: #20794D;">"&lt;b&gt;{point.name}:&lt;/b&gt; {point.n}"</span></span>
<span id="cb5-12">  ) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb5-13">  <span class="fu" style="color: #4758AB;">hc_plotOptions</span>(</span>
<span id="cb5-14">    <span class="at" style="color: #657422;">packedbubble =</span> <span class="fu" style="color: #4758AB;">list</span>(</span>
<span id="cb5-15">      <span class="at" style="color: #657422;">maxSize =</span> <span class="st" style="color: #20794D;">"150%"</span>,</span>
<span id="cb5-16">      <span class="at" style="color: #657422;">zMin =</span> <span class="dv" style="color: #AD0000;">0</span>,</span>
<span id="cb5-17">      <span class="at" style="color: #657422;">layoutAlgorithm =</span> <span class="fu" style="color: #4758AB;">list</span>(</span>
<span id="cb5-18">        <span class="at" style="color: #657422;">gravitationalConstant =</span>  <span class="fl" style="color: #AD0000;">0.05</span>,</span>
<span id="cb5-19">        <span class="at" style="color: #657422;">splitSeries =</span>  <span class="cn" style="color: #8f5902;">TRUE</span>, <span class="co" style="color: #5E5E5E;"># TRUE to group points</span></span>
<span id="cb5-20">        <span class="at" style="color: #657422;">seriesInteraction =</span> <span class="cn" style="color: #8f5902;">TRUE</span>,</span>
<span id="cb5-21">        <span class="at" style="color: #657422;">dragBetweenSeries =</span> <span class="cn" style="color: #8f5902;">TRUE</span>,</span>
<span id="cb5-22">        <span class="at" style="color: #657422;">parentNodeLimit =</span> <span class="cn" style="color: #8f5902;">TRUE</span></span>
<span id="cb5-23">      ),</span>
<span id="cb5-24">      <span class="at" style="color: #657422;">dataLabels =</span> <span class="fu" style="color: #4758AB;">list</span>(</span>
<span id="cb5-25">        <span class="at" style="color: #657422;">enabled =</span> <span class="cn" style="color: #8f5902;">TRUE</span>,</span>
<span id="cb5-26">        <span class="at" style="color: #657422;">format =</span> <span class="st" style="color: #20794D;">"{point.code}"</span>,</span>
<span id="cb5-27">        <span class="at" style="color: #657422;">filter =</span> <span class="fu" style="color: #4758AB;">list</span>(</span>
<span id="cb5-28">          <span class="at" style="color: #657422;">property =</span> <span class="st" style="color: #20794D;">"y"</span>,</span>
<span id="cb5-29">          <span class="at" style="color: #657422;">operator =</span> <span class="st" style="color: #20794D;">"&gt;"</span>,</span>
<span id="cb5-30">          <span class="at" style="color: #657422;">value =</span> q95</span>
<span id="cb5-31">        ),</span>
<span id="cb5-32">        <span class="at" style="color: #657422;">style =</span> <span class="fu" style="color: #4758AB;">list</span>(</span>
<span id="cb5-33">          <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"black"</span>,</span>
<span id="cb5-34">          <span class="at" style="color: #657422;">textOutline =</span> <span class="st" style="color: #20794D;">"none"</span>,</span>
<span id="cb5-35">          <span class="at" style="color: #657422;">fontWeight =</span> <span class="st" style="color: #20794D;">"normal"</span></span>
<span id="cb5-36">        )</span>
<span id="cb5-37">      )</span>
<span id="cb5-38">    )</span>
<span id="cb5-39">  )</span></code></pre></div>
<div class="cell-output-display">

<div id="htmlwidget-cd4258265a0a6c0860b1" style="width:100%;height:464px;" class="highchart html-widget"></div>
<script type="application/json" data-for="htmlwidget-cd4258265a0a6c0860b1">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":null},"yAxis":{"title":{"text":[]}},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"packedbubble":{"maxSize":"150%","zMin":0,"layoutAlgorithm":{"gravitationalConstant":0.05,"splitSeries":true,"seriesInteraction":true,"dragBetweenSeries":true,"parentNodeLimit":true},"dataLabels":{"enabled":true,"format":"{point.code}","filter":{"property":"y","operator":">","value":116.3},"style":{"color":"black","textOutline":"none","fontWeight":"normal"}}}},"series":[{"name":"Central","data":[{"region_nam":"Dodoma","zone":"Central","n":65,"district":"Bahi","code":"BAH","name":"Bahi","value":65},{"region_nam":"Dodoma","zone":"Central","n":100,"district":"Chamwino","code":"CHA","name":"Chamwino","value":100},{"region_nam":"Dodoma","zone":"Central","n":95,"district":"Chemba","code":"CHE","name":"Chemba","value":95},{"region_nam":"Dodoma","zone":"Central","n":57,"district":"Dodoma","code":"DOD","name":"Dodoma","value":57},{"region_nam":"Dodoma","zone":"Central","n":86,"district":"Kondoa","code":"KON","name":"Kondoa","value":86},{"region_nam":"Dodoma","zone":"Central","n":113,"district":"Kongwa","code":"KON","name":"Kongwa","value":113},{"region_nam":"Dodoma","zone":"Central","n":95,"district":"Mpwapwa","code":"MPW","name":"Mpwapwa","value":95},{"region_nam":"Singida","zone":"Central","n":145,"district":"Ikungi","code":"IKU","name":"Ikungi","value":145},{"region_nam":"Singida","zone":"Central","n":75,"district":"Iramba","code":"IRA","name":"Iramba","value":75},{"region_nam":"Singida","zone":"Central","n":45,"district":"Manyoni","code":"MAN","name":"Manyoni","value":45},{"region_nam":"Singida","zone":"Central","n":70,"district":"Mkalama","code":"MKA","name":"Mkalama","value":70},{"region_nam":"Singida","zone":"Central","n":68,"district":"Singida","code":"SIN","name":"Singida","value":68},{"region_nam":"Singida","zone":"Central","n":21,"district":"Singida","code":"SIN","name":"Singida","value":21},{"region_nam":"Singida","zone":"Central","n":78,"district":"Itigi","code":"ITI","name":"Itigi","value":78},{"region_nam":"Dodoma","zone":"Central","n":8,"district":"Kondoa","code":"KON","name":"Kondoa","value":8}],"type":"packedbubble"},{"name":"Coast","data":[{"region_nam":"Dar-es-salaam","zone":"Coast","n":null,"district":"Dar","code":"DAR","name":"Dar","value":null},{"region_nam":"Dar-es-salaam","zone":"Coast","n":32,"district":"Kinondoni","code":"KIN","name":"Kinondoni","value":32},{"region_nam":"Dar-es-salaam","zone":"Coast","n":25,"district":"Temeke","code":"TEM","name":"Temeke","value":25},{"region_nam":"Morogoro","zone":"Coast","n":58,"district":"Gairo","code":"GAI","name":"Gairo","value":58},{"region_nam":"Morogoro","zone":"Coast","n":69,"district":"Mlimba","code":"MLI","name":"Mlimba","value":69},{"region_nam":"Morogoro","zone":"Coast","n":129,"district":"Kilosa","code":"KIL","name":"Kilosa","value":129},{"region_nam":"Morogoro","zone":"Coast","n":78,"district":"Morogoro","code":"MOR","name":"Morogoro","value":78},{"region_nam":"Morogoro","zone":"Coast","n":27,"district":"Morogoro","code":"MOR","name":"Morogoro","value":27},{"region_nam":"Morogoro","zone":"Coast","n":88,"district":"Mvomero","code":"MVO","name":"Mvomero","value":88},{"region_nam":"Morogoro","zone":"Coast","n":18,"district":"Ulanga","code":"ULA","name":"Ulanga","value":18},{"region_nam":"Pwani","zone":"Coast","n":43,"district":"Chalinze","code":"CHA","name":"Chalinze","value":43},{"region_nam":"Pwani","zone":"Coast","n":6,"district":"Kibaha","code":"KIB","name":"Kibaha","value":6},{"region_nam":"Pwani","zone":"Coast","n":7,"district":"Kibaha","code":"KIB","name":"Kibaha","value":7},{"region_nam":"Pwani","zone":"Coast","n":18,"district":"Kisarawe","code":"KIS","name":"Kisarawe","value":18},{"region_nam":"Pwani","zone":"Coast","n":2,"district":"Mafia","code":"MAF","name":"Mafia","value":2},{"region_nam":"Pwani","zone":"Coast","n":73,"district":"Mkuranga","code":"MKU","name":"Mkuranga","value":73},{"region_nam":"Pwani","zone":"Coast","n":29,"district":"Rufiji","code":"RUF","name":"Rufiji","value":29},{"region_nam":"Tanga","zone":"Coast","n":71,"district":"Handeni","code":"HAN","name":"Handeni","value":71},{"region_nam":"Tanga","zone":"Coast","n":14,"district":"Handeni","code":"HAN","name":"Handeni","value":14},{"region_nam":"Tanga","zone":"Coast","n":61,"district":"Kilindi","code":"KIL","name":"Kilindi","value":61},{"region_nam":"Tanga","zone":"Coast","n":38,"district":"Korogwe","code":"KOR","name":"Korogwe","value":38},{"region_nam":"Tanga","zone":"Coast","n":11,"district":"Korogwe","code":"KOR","name":"Korogwe","value":11},{"region_nam":"Tanga","zone":"Coast","n":160,"district":"Lushoto","code":"LUS","name":"Lushoto","value":160},{"region_nam":"Tanga","zone":"Coast","n":39,"district":"Mkinga","code":"MKI","name":"Mkinga","value":39},{"region_nam":"Tanga","zone":"Coast","n":46,"district":"Muheza","code":"MUH","name":"Muheza","value":46},{"region_nam":"Tanga","zone":"Coast","n":13,"district":"Pangani","code":"PAN","name":"Pangani","value":13},{"region_nam":"Tanga","zone":"Coast","n":18,"district":"Tanga","code":"TAN","name":"Tanga","value":18},{"region_nam":"Tanga","zone":"Coast","n":36,"district":"Bumbuli","code":"BUM","name":"Bumbuli","value":36},{"region_nam":"Pwani","zone":"Coast","n":12,"district":"Bagamoyo","code":"BAG","name":"Bagamoyo","value":12},{"region_nam":"Morogoro","zone":"Coast","n":32,"district":"Ifakara","code":"IFA","name":"Ifakara","value":32},{"region_nam":"Pwani","zone":"Coast","n":36,"district":"Kibiti","code":"KIB","name":"Kibiti","value":36},{"region_nam":"Dar-es-salaam","zone":"Coast","n":15,"district":"Kigamboni","code":"KIG","name":"Kigamboni","value":15},{"region_nam":"Morogoro","zone":"Coast","n":20,"district":"Malinyi","code":"MAL","name":"Malinyi","value":20},{"region_nam":"Dar-es-salaam","zone":"Coast","n":30,"district":"Ubungo","code":"UBU","name":"Ubungo","value":30}],"type":"packedbubble"},{"name":"Lake","data":[{"region_nam":"Geita","zone":"Lake","n":100,"district":"Bukombe","code":"BUK","name":"Bukombe","value":100},{"region_nam":"Geita","zone":"Lake","n":188,"district":"Chato","code":"CHA","name":"Chato","value":188},{"region_nam":"Geita","zone":"Lake","n":122,"district":"Geita","code":"GEI","name":"Geita","value":122},{"region_nam":"Geita","zone":"Lake","n":61,"district":"Mbogwe","code":"MBO","name":"Mbogwe","value":61},{"region_nam":"Geita","zone":"Lake","n":null,"district":"Nyang'wale","code":"NYA","name":"Nyang'wale","value":null},{"region_nam":"Kagera","zone":"Lake","n":100,"district":"Biharamulo","code":"BIH","name":"Biharamulo","value":100},{"region_nam":"Kagera","zone":"Lake","n":78,"district":"Bukoba","code":"BUK","name":"Bukoba","value":78},{"region_nam":"Kagera","zone":"Lake","n":18,"district":"Bukoba","code":"BUK","name":"Bukoba","value":18},{"region_nam":"Kagera","zone":"Lake","n":82,"district":"Karagwe","code":"KAR","name":"Karagwe","value":82},{"region_nam":"Kagera","zone":"Lake","n":85,"district":"Kyerwa","code":"KYE","name":"Kyerwa","value":85},{"region_nam":"Kagera","zone":"Lake","n":37,"district":"Missenyi","code":"MIS","name":"Missenyi","value":37},{"region_nam":"Kagera","zone":"Lake","n":148,"district":"Muleba","code":"MUL","name":"Muleba","value":148},{"region_nam":"Kagera","zone":"Lake","n":99,"district":"Ngara","code":"NGA","name":"Ngara","value":99},{"region_nam":"Katavi","zone":"Lake","n":49,"district":"Mlele","code":"MLE","name":"Mlele","value":49},{"region_nam":"Katavi","zone":"Lake","n":null,"district":"Mpanda","code":"MPA","name":"Mpanda","value":null},{"region_nam":"Katavi","zone":"Lake","n":55,"district":"Mpanda","code":"MPA","name":"Mpanda","value":55},{"region_nam":"Kigoma","zone":"Lake","n":55,"district":"Buhigwe","code":"BUH","name":"Buhigwe","value":55},{"region_nam":"Kigoma","zone":"Lake","n":72,"district":"Kakonko","code":"KAK","name":"Kakonko","value":72},{"region_nam":"Kigoma","zone":"Lake","n":147,"district":"Kasulu","code":"KAS","name":"Kasulu","value":147},{"region_nam":"Kigoma","zone":"Lake","n":45,"district":"Kasulu","code":"KAS","name":"Kasulu","value":45},{"region_nam":"Kigoma","zone":"Lake","n":51,"district":"Kibondo","code":"KIB","name":"Kibondo","value":51},{"region_nam":"Kigoma","zone":"Lake","n":26,"district":"Kigoma","code":"KIG","name":"Kigoma","value":26},{"region_nam":"Kigoma","zone":"Lake","n":60,"district":"Kigoma","code":"KIG","name":"Kigoma","value":60},{"region_nam":"Kigoma","zone":"Lake","n":156,"district":"Uvinza","code":"UVI","name":"Uvinza","value":156},{"region_nam":"Mara","zone":"Lake","n":44,"district":"Bunda","code":"BUN","name":"Bunda","value":44},{"region_nam":"Mara","zone":"Lake","n":61,"district":"Musoma","code":"MUS","name":"Musoma","value":61},{"region_nam":"Mara","zone":"Lake","n":19,"district":"Musoma","code":"MUS","name":"Musoma","value":19},{"region_nam":"Mara","zone":"Lake","n":113,"district":"Rorya","code":"ROR","name":"Rorya","value":113},{"region_nam":"Mara","zone":"Lake","n":99,"district":"Serengeti","code":"SER","name":"Serengeti","value":99},{"region_nam":"Mara","zone":"Lake","n":111,"district":"Tarime","code":"TAR","name":"Tarime","value":111},{"region_nam":"Mwanza","zone":"Lake","n":26,"district":"Ilemela","code":"ILE","name":"Ilemela","value":26},{"region_nam":"Mwanza","zone":"Lake","n":72,"district":"Kwimba","code":"KWI","name":"Kwimba","value":72},{"region_nam":"Mwanza","zone":"Lake","n":72,"district":"Magu","code":"MAG","name":"Magu","value":72},{"region_nam":"Mwanza","zone":"Lake","n":97,"district":"Misungwi","code":"MIS","name":"Misungwi","value":97},{"region_nam":"Mwanza","zone":"Lake","n":33,"district":"Mwanza","code":"MWA","name":"Mwanza","value":33},{"region_nam":"Mwanza","zone":"Lake","n":52,"district":"Sengerema","code":"SEN","name":"Sengerema","value":52},{"region_nam":"Mwanza","zone":"Lake","n":72,"district":"Ukerewe","code":"UKE","name":"Ukerewe","value":72},{"region_nam":"Shinyanga","zone":"Lake","n":59,"district":"Msalala","code":"MSA","name":"Msalala","value":59},{"region_nam":"Shinyanga","zone":"Lake","n":58,"district":"Kahama","code":"KAH","name":"Kahama","value":58},{"region_nam":"Shinyanga","zone":"Lake","n":145,"district":"Kishapu","code":"KIS","name":"Kishapu","value":145},{"region_nam":"Shinyanga","zone":"Lake","n":53,"district":"Shinyanga","code":"SHI","name":"Shinyanga","value":53},{"region_nam":"Shinyanga","zone":"Lake","n":28,"district":"Shinyanga","code":"SHI","name":"Shinyanga","value":28},{"region_nam":"Simiyu","zone":"Lake","n":69,"district":"Bariadi","code":"BAR","name":"Bariadi","value":69},{"region_nam":"Simiyu","zone":"Lake","n":56,"district":"Busega","code":"BUS","name":"Busega","value":56},{"region_nam":"Simiyu","zone":"Lake","n":69,"district":"Itilima","code":"ITI","name":"Itilima","value":69},{"region_nam":"Simiyu","zone":"Lake","n":107,"district":"Maswa","code":"MAS","name":"Maswa","value":107},{"region_nam":"Simiyu","zone":"Lake","n":51,"district":"Meatu","code":"MEA","name":"Meatu","value":51},{"region_nam":"Tabora","zone":"Lake","n":98,"district":"Igunga","code":"IGU","name":"Igunga","value":98},{"region_nam":"Tabora","zone":"Lake","n":116,"district":"Kaliua","code":"KAL","name":"Kaliua","value":116},{"region_nam":"Tabora","zone":"Lake","n":96,"district":"Nzega","code":"NZE","name":"Nzega","value":96},{"region_nam":"Tabora","zone":"Lake","n":53,"district":"Sikonge","code":"SIK","name":"Sikonge","value":53},{"region_nam":"Tabora","zone":"Lake","n":41,"district":"Tabora","code":"TAB","name":"Tabora","value":41},{"region_nam":"Tabora","zone":"Lake","n":48,"district":"Urambo","code":"URA","name":"Urambo","value":48},{"region_nam":"Tabora","zone":"Lake","n":101,"district":"Uyui","code":"UYU","name":"Uyui","value":101},{"region_nam":"Simiyu","zone":"Lake","n":25,"district":"Bariadi","code":"BAR","name":"Bariadi","value":25},{"region_nam":"Mwanza","zone":"Lake","n":36,"district":"Buchosa","code":"BUC","name":"Buchosa","value":36},{"region_nam":"Mara","zone":"Lake","n":29,"district":"Bunda","code":"BUN","name":"Bunda","value":29},{"region_nam":"Geita","zone":"Lake","n":39,"district":"Geita","code":"GEI","name":"Geita","value":39},{"region_nam":"Shinyanga","zone":"Lake","n":61,"district":"Ushetu","code":"USH","name":"Ushetu","value":61},{"region_nam":"Katavi","zone":"Lake","n":55,"district":"Mpimbwe","code":"MPI","name":"Mpimbwe","value":55},{"region_nam":"Katavi","zone":"Lake","n":78,"district":"Nsimbo","code":"NSI","name":"Nsimbo","value":78},{"region_nam":"Tabora","zone":"Lake","n":12,"district":"Nzega","code":"NZE","name":"Nzega","value":12},{"region_nam":"Mara","zone":"Lake","n":7,"district":"Tarime","code":"TAR","name":"Tarime","value":7},{"region_nam":"Mara","zone":"Lake","n":48,"district":"Butiama","code":"BUT","name":"Butiama","value":48}],"type":"packedbubble"},{"name":"Northern","data":[{"region_nam":"Arusha","zone":"Northern","n":25,"district":"Arusha","code":"ARU","name":"Arusha","value":25},{"region_nam":"Arusha","zone":"Northern","n":33,"district":"Arusha","code":"ARU","name":"Arusha","value":33},{"region_nam":"Arusha","zone":"Northern","n":27,"district":"Karatu","code":"KAR","name":"Karatu","value":27},{"region_nam":"Arusha","zone":"Northern","n":28,"district":"Longido","code":"LON","name":"Longido","value":28},{"region_nam":"Arusha","zone":"Northern","n":52,"district":"Meru","code":"MER","name":"Meru","value":52},{"region_nam":"Arusha","zone":"Northern","n":7,"district":"Monduli","code":"MON","name":"Monduli","value":7},{"region_nam":"Arusha","zone":"Northern","n":63,"district":"Ngorongoro","code":"NGO","name":"Ngorongoro","value":63},{"region_nam":"Kilimanjaro","zone":"Northern","n":30,"district":"Hai","code":"HAI","name":"Hai","value":30},{"region_nam":"Kilimanjaro","zone":"Northern","n":65,"district":"Moshi","code":"MOS","name":"Moshi","value":65},{"region_nam":"Kilimanjaro","zone":"Northern","n":13,"district":"Moshi","code":"MOS","name":"Moshi","value":13},{"region_nam":"Kilimanjaro","zone":"Northern","n":34,"district":"Mwanga","code":"MWA","name":"Mwanga","value":34},{"region_nam":"Kilimanjaro","zone":"Northern","n":54,"district":"Rombo","code":"ROM","name":"Rombo","value":54},{"region_nam":"Kilimanjaro","zone":"Northern","n":61,"district":"Same","code":"SAM","name":"Same","value":61},{"region_nam":"Kilimanjaro","zone":"Northern","n":20,"district":"Siha","code":"SIH","name":"Siha","value":20},{"region_nam":"Manyara","zone":"Northern","n":94,"district":"Babati","code":"BAB","name":"Babati","value":94},{"region_nam":"Manyara","zone":"Northern","n":8,"district":"Babati","code":"BAB","name":"Babati","value":8},{"region_nam":"Manyara","zone":"Northern","n":95,"district":"Hanang","code":"HAN","name":"Hanang","value":95},{"region_nam":"Manyara","zone":"Northern","n":37,"district":"Kiteto","code":"KIT","name":"Kiteto","value":37},{"region_nam":"Manyara","zone":"Northern","n":23,"district":"Mbulu","code":"MBU","name":"Mbulu","value":23},{"region_nam":"Manyara","zone":"Northern","n":35,"district":"Simanjiro","code":"SIM","name":"Simanjiro","value":35},{"region_nam":"Manyara","zone":"Northern","n":27,"district":"Mbulu","code":"MBU","name":"Mbulu","value":27}],"type":"packedbubble"},{"name":"Southern","data":[{"region_nam":"Lindi","zone":"Southern","n":80,"district":"Kilwa","code":"KIL","name":"Kilwa","value":80},{"region_nam":"Lindi","zone":"Southern","n":null,"district":"Lindi","code":"LIN","name":"Lindi","value":null},{"region_nam":"Lindi","zone":"Southern","n":59,"district":"Lindi","code":"LIN","name":"Lindi","value":59},{"region_nam":"Lindi","zone":"Southern","n":23,"district":"Liwale","code":"LIW","name":"Liwale","value":23},{"region_nam":"Lindi","zone":"Southern","n":41,"district":"Nachingwea","code":"NAC","name":"Nachingwea","value":41},{"region_nam":"Lindi","zone":"Southern","n":30,"district":"Ruangwa","code":"RUA","name":"Ruangwa","value":30},{"region_nam":"Mtwara","zone":"Southern","n":60,"district":"Masasi","code":"MAS","name":"Masasi","value":60},{"region_nam":"Mtwara","zone":"Southern","n":18,"district":"Masasi","code":"MAS","name":"Masasi","value":18},{"region_nam":"Mtwara","zone":"Southern","n":39,"district":"Mtwara","code":"MTW","name":"Mtwara","value":39},{"region_nam":"Mtwara","zone":"Southern","n":14,"district":"Mtwara","code":"MTW","name":"Mtwara","value":14},{"region_nam":"Mtwara","zone":"Southern","n":48,"district":"Nanyumbu","code":"NAN","name":"Nanyumbu","value":48},{"region_nam":"Mtwara","zone":"Southern","n":20,"district":"Newala","code":"NEW","name":"Newala","value":20},{"region_nam":"Mtwara","zone":"Southern","n":30,"district":"Tandahimba","code":"TAN","name":"Tandahimba","value":30},{"region_nam":"Mtwara","zone":"Southern","n":30,"district":"Nanyamba","code":"NAN","name":"Nanyamba","value":30},{"region_nam":"Mtwara","zone":"Southern","n":24,"district":"Newala","code":"NEW","name":"Newala","value":24}],"type":"packedbubble"},{"name":"Southern Highland","data":[{"region_nam":"Iringa","zone":"Southern Highland","n":39,"district":"Iringa","code":"IRI","name":"Iringa","value":39},{"region_nam":"Iringa","zone":"Southern Highland","n":14,"district":"Iringa","code":"IRI","name":"Iringa","value":14},{"region_nam":"Iringa","zone":"Southern Highland","n":31,"district":"Kilolo","code":"KIL","name":"Kilolo","value":31},{"region_nam":"Iringa","zone":"Southern Highland","n":14,"district":"Mafinga","code":"MAF","name":"Mafinga","value":14},{"region_nam":"Iringa","zone":"Southern Highland","n":22,"district":"Mufindi","code":"MUF","name":"Mufindi","value":22},{"region_nam":"Mbeya","zone":"Southern Highland","n":79,"district":"Chunya","code":"CHU","name":"Chunya","value":79},{"region_nam":"Songwe","zone":"Southern Highland","n":23,"district":"Ileje","code":"ILE","name":"Ileje","value":23},{"region_nam":"Mbeya","zone":"Southern Highland","n":22,"district":"Kyela","code":"KYE","name":"Kyela","value":22},{"region_nam":"Mbeya","zone":"Southern Highland","n":66,"district":"Mbarali","code":"MBA","name":"Mbarali","value":66},{"region_nam":"Mbeya","zone":"Southern Highland","n":84,"district":"Mbeya","code":"MBE","name":"Mbeya","value":84},{"region_nam":"Mbeya","zone":"Southern Highland","n":50,"district":"Mbeya","code":"MBE","name":"Mbeya","value":50},{"region_nam":"Songwe","zone":"Southern Highland","n":84,"district":"Mbozi","code":"MBO","name":"Mbozi","value":84},{"region_nam":"Songwe","zone":"Southern Highland","n":42,"district":"Momba","code":"MOM","name":"Momba","value":42},{"region_nam":"Mbeya","zone":"Southern Highland","n":24,"district":"Rungwe","code":"RUN","name":"Rungwe","value":24},{"region_nam":"Songwe","zone":"Southern Highland","n":56,"district":"Tunduma","code":"TUN","name":"Tunduma","value":56},{"region_nam":"Njombe","zone":"Southern Highland","n":12,"district":"Ludewa","code":"LUD","name":"Ludewa","value":12},{"region_nam":"Njombe","zone":"Southern Highland","n":16,"district":"Makambako","code":"MAK","name":"Makambako","value":16},{"region_nam":"Njombe","zone":"Southern Highland","n":21,"district":"Makete","code":"MAK","name":"Makete","value":21},{"region_nam":"Njombe","zone":"Southern Highland","n":13,"district":"Njombe","code":"NJO","name":"Njombe","value":13},{"region_nam":"Njombe","zone":"Southern Highland","n":15,"district":"Njombe","code":"NJO","name":"Njombe","value":15},{"region_nam":"Njombe","zone":"Southern Highland","n":28,"district":"Wanging'ombe","code":"WAN","name":"Wanging'ombe","value":28},{"region_nam":"Rukwa","zone":"Southern Highland","n":39,"district":"Kalambo","code":"KAL","name":"Kalambo","value":39},{"region_nam":"Rukwa","zone":"Southern Highland","n":64,"district":"Nkasi","code":"NKA","name":"Nkasi","value":64},{"region_nam":"Rukwa","zone":"Southern Highland","n":37,"district":"Sumbawanga","code":"SUM","name":"Sumbawanga","value":37},{"region_nam":"Rukwa","zone":"Southern Highland","n":14,"district":"Sumbawanga","code":"SUM","name":"Sumbawanga","value":14},{"region_nam":"Ruvuma","zone":"Southern Highland","n":88,"district":"Mbinga","code":"MBI","name":"Mbinga","value":88},{"region_nam":"Ruvuma","zone":"Southern Highland","n":53,"district":"Namtumbo","code":"NAM","name":"Namtumbo","value":53},{"region_nam":"Ruvuma","zone":"Southern Highland","n":44,"district":"Nyasa","code":"NYA","name":"Nyasa","value":44},{"region_nam":"Ruvuma","zone":"Southern Highland","n":44,"district":"Songea","code":"SON","name":"Songea","value":44},{"region_nam":"Ruvuma","zone":"Southern Highland","n":37,"district":"Songea","code":"SON","name":"Songea","value":37},{"region_nam":"Ruvuma","zone":"Southern Highland","n":85,"district":"Tunduru","code":"TUN","name":"Tunduru","value":85},{"region_nam":"Mbeya","zone":"Southern Highland","n":26,"district":"Busokelo","code":"BUS","name":"Busokelo","value":26},{"region_nam":"Ruvuma","zone":"Southern Highland","n":8,"district":"Madaba","code":"MAD","name":"Madaba","value":8},{"region_nam":"Ruvuma","zone":"Southern Highland","n":30,"district":"Mbinga","code":"MBI","name":"Mbinga","value":30},{"region_nam":"Songwe","zone":"Southern Highland","n":41,"district":"Songwe","code":"SON","name":"Songwe","value":41}],"type":"packedbubble"}],"xAxis":{"type":null,"title":{"text":[]},"categories":null},"tooltip":{"useHTML":true,"pointFormat":"<b>{point.name}:<\/b> {point.n}"}},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"◁ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="sankey" class="level2">
<h2 class="anchored" data-anchor-id="sankey">Sankey</h2>
<p>A sankey diagram is a visualization used to depict a flow from one set of values to another. The things being connected are called nodes and the connections are called links.Sankey diagrams can also visualize the energy accounts, material flow accounts on a regional or national level, and cost breakdowns.[1] The diagrams are often used in the visualization of material flow analysis.</p>
<p>Sankey diagrams emphasize the major transfers or flows within a system. They help locate the most important contributions to a flow. They often show conserved quantities within defined system boundaries.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">   quest.tb <span class="ot" style="color: #003B4F;">=</span>  walimu.clean <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb6-2">      <span class="fu" style="color: #4758AB;">group_by</span>(kiwango_cha_elimu, jinsi) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb6-3">      <span class="fu" style="color: #4758AB;">summarise</span>(<span class="at" style="color: #657422;">value =</span> <span class="fu" style="color: #4758AB;">n</span>(), <span class="at" style="color: #657422;">.groups =</span> <span class="st" style="color: #20794D;">"drop"</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb6-4">      <span class="fu" style="color: #4758AB;">rename</span>(<span class="at" style="color: #657422;">source =</span> <span class="dv" style="color: #AD0000;">2</span>, <span class="at" style="color: #657422;">target =</span> <span class="dv" style="color: #AD0000;">1</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb6-5">      <span class="fu" style="color: #4758AB;">filter</span>(value <span class="sc" style="color: #5E5E5E;">&gt;</span> <span class="dv" style="color: #AD0000;">100</span>)<span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb6-6">      <span class="fu" style="color: #4758AB;">as.data.frame</span>()</span>
<span id="cb6-7">        </span>
<span id="cb6-8">    </span>
<span id="cb6-9">    <span class="co" style="color: #5E5E5E;"># From these flows we need to create a node data frame: it lists every entities involved in the flow</span></span>
<span id="cb6-10">    nodes <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">data.frame</span>(<span class="at" style="color: #657422;">name=</span><span class="fu" style="color: #4758AB;">c</span>(<span class="fu" style="color: #4758AB;">as.character</span>(quest.tb<span class="sc" style="color: #5E5E5E;">$</span>source), </span>
<span id="cb6-11">                               <span class="fu" style="color: #4758AB;">as.character</span>(quest.tb<span class="sc" style="color: #5E5E5E;">$</span>target)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb6-12">                          <span class="fu" style="color: #4758AB;">unique</span>())</span>
<span id="cb6-13">    </span>
<span id="cb6-14">    nodes <span class="ot" style="color: #003B4F;">=</span> quest.tb <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb6-15">      <span class="fu" style="color: #4758AB;">select</span>(<span class="sc" style="color: #5E5E5E;">-</span>value) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb6-16">      <span class="fu" style="color: #4758AB;">pivot_longer</span>(<span class="at" style="color: #657422;">cols =</span> source<span class="sc" style="color: #5E5E5E;">:</span>target) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb6-17">      <span class="fu" style="color: #4758AB;">distinct</span>(value) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb6-18">      <span class="fu" style="color: #4758AB;">rename</span>(<span class="at" style="color: #657422;">name =</span> <span class="dv" style="color: #AD0000;">1</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb6-19">      <span class="fu" style="color: #4758AB;">as.data.frame</span>()</span>
<span id="cb6-20">    </span>
<span id="cb6-21">    <span class="co" style="color: #5E5E5E;"># With networkD3, connection must be provided using id, not using real name like in the links dataframe.. So we need to reformat it.</span></span>
<span id="cb6-22">    quest.tb<span class="sc" style="color: #5E5E5E;">$</span>IDsource<span class="ot" style="color: #003B4F;">=</span><span class="fu" style="color: #4758AB;">match</span>(quest.tb<span class="sc" style="color: #5E5E5E;">$</span>source, nodes<span class="sc" style="color: #5E5E5E;">$</span>name)<span class="sc" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">1</span> </span>
<span id="cb6-23">    quest.tb<span class="sc" style="color: #5E5E5E;">$</span>IDtarget<span class="ot" style="color: #003B4F;">=</span><span class="fu" style="color: #4758AB;">match</span>(quest.tb<span class="sc" style="color: #5E5E5E;">$</span>target, nodes<span class="sc" style="color: #5E5E5E;">$</span>name)<span class="sc" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">1</span></span>
<span id="cb6-24">    </span>
<span id="cb6-25">    </span>
<span id="cb6-26">    <span class="co" style="color: #5E5E5E;"># Make the Network </span></span>
<span id="cb6-27">    networkD3<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">sankeyNetwork</span>(<span class="at" style="color: #657422;">Links =</span> quest.tb, </span>
<span id="cb6-28">                             <span class="at" style="color: #657422;">Nodes =</span> nodes,</span>
<span id="cb6-29">                             <span class="at" style="color: #657422;">Source =</span> <span class="st" style="color: #20794D;">"IDsource"</span>, </span>
<span id="cb6-30">                             <span class="at" style="color: #657422;">Target =</span> <span class="st" style="color: #20794D;">"IDtarget"</span>,</span>
<span id="cb6-31">                             <span class="at" style="color: #657422;">Value =</span> <span class="st" style="color: #20794D;">"value"</span>, </span>
<span id="cb6-32">                             <span class="at" style="color: #657422;">NodeID =</span> <span class="st" style="color: #20794D;">"name"</span>, </span>
<span id="cb6-33">                             <span class="at" style="color: #657422;">fontFamily =</span> <span class="st" style="color: #20794D;">"Myriad Pro"</span>,</span>
<span id="cb6-34">                             <span class="at" style="color: #657422;">LinkGroup =</span> <span class="st" style="color: #20794D;">"source"</span>,</span>
<span id="cb6-35">                             <span class="at" style="color: #657422;">sinksRight=</span><span class="cn" style="color: #8f5902;">FALSE</span>,</span>
<span id="cb6-36">                             <span class="co" style="color: #5E5E5E;"># height = 600, width = 800,</span></span>
<span id="cb6-37">                             <span class="co" style="color: #5E5E5E;"># colourScale=ColourScal,</span></span>
<span id="cb6-38">                             <span class="at" style="color: #657422;">nodeWidth=</span><span class="dv" style="color: #AD0000;">30</span>, </span>
<span id="cb6-39">                             <span class="at" style="color: #657422;">iterations =</span> <span class="dv" style="color: #AD0000;">5</span>,</span>
<span id="cb6-40">                             <span class="at" style="color: #657422;">fontSize=</span><span class="dv" style="color: #AD0000;">14</span>, </span>
<span id="cb6-41">                             <span class="at" style="color: #657422;">nodePadding=</span><span class="dv" style="color: #AD0000;">30</span>, </span>
<span id="cb6-42">                             <span class="at" style="color: #657422;">width =</span> <span class="dv" style="color: #AD0000;">1000</span>, </span>
<span id="cb6-43">                             <span class="at" style="color: #657422;">height =</span> <span class="dv" style="color: #AD0000;">400</span>)</span></code></pre></div>
<div class="cell-output-display">
<div id="htmlwidget-4b9713ac2c3838e39170" style="width:100%;height:260px;" class="sankeyNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-4b9713ac2c3838e39170">{"x":{"links":{"source":[0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2],"target":[1,1,3,3,4,4,5,5,6,6,7,7,8,8,9,9],"value":[406,1362,266,488,250,250,943,1252,500,500,500,501,229,207,425,1478],"group":["Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male"]},"nodes":{"name":["Female","Bachelor Degree Education  (Science)","Male","Bachelor Degree Education (Arts)","Bachelor of Education in Early Childhood Education","Certificate in Primary Education","Diploma in Early Child Education","Diploma in Primary School","Diploma in Secondary Education (Arts)","Diploma in Secondary Education (Science)"],"group":["Female","Bachelor Degree Education  (Science)","Male","Bachelor Degree Education (Arts)","Bachelor of Education in Early Childhood Education","Certificate in Primary Education","Diploma in Early Child Education","Diploma in Primary School","Diploma in Secondary Education (Arts)","Diploma in Secondary Education (Science)"]},"options":{"NodeID":"name","NodeGroup":"name","LinkGroup":"source","colourScale":"d3.scaleOrdinal(d3.schemeCategory20);","fontSize":14,"fontFamily":"Myriad Pro","nodeWidth":30,"nodePadding":30,"units":"","margin":{"top":null,"right":null,"bottom":null,"left":null},"iterations":5,"sinksRight":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="chord-diagram" class="level2">
<h2 class="anchored" data-anchor-id="chord-diagram">Chord diagram</h2>
<p>A chord diagram represents flows or connections between several entities (called nodes). Each entity is represented by a fragment on the outer part of the circular layout. Then, arcs are drawn between each entities. The size of the arc is proportional to the importance of the flow. In this section I will discuss the transfer of public servants between region in the country. I will use the chord diagram, which makes visual appeal and provide insight in a more clear form.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">tamisemi <span class="ot" style="color: #003B4F;">=</span> readxl<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">read_excel</span>(<span class="st" style="color: #20794D;">"d:/semba/vpo/data/tamisemi/uhamisho_data.xlsx"</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb7-2">  janitor<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">clean_names</span>()</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">tam.clean <span class="ot" style="color: #003B4F;">=</span> tamisemi <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb8-2">  <span class="fu" style="color: #4758AB;">separate</span>(<span class="at" style="color: #657422;">col =</span> anakotoka, <span class="at" style="color: #657422;">into =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"lga_toka"</span>, <span class="st" style="color: #20794D;">"bb"</span>, <span class="st" style="color: #20794D;">"lga_toka_name"</span>))<span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb8-3">  <span class="fu" style="color: #4758AB;">separate</span>(<span class="at" style="color: #657422;">col =</span> anakoenda, <span class="at" style="color: #657422;">into =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"lga_enda"</span>, <span class="st" style="color: #20794D;">"bb"</span>, <span class="st" style="color: #20794D;">"lga_enda_name"</span>)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb8-4">  <span class="fu" style="color: #4758AB;">relocate</span>(<span class="fu" style="color: #4758AB;">c</span>(lga_enda, lga_enda_name), <span class="at" style="color: #657422;">.after =</span> lga_toka_name) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb8-5">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">lga_toka =</span> <span class="fu" style="color: #4758AB;">if_else</span>(lga_toka<span class="sc" style="color: #5E5E5E;">==</span><span class="st" style="color: #20794D;">"Manipaa"</span>, <span class="st" style="color: #20794D;">"Manispaa"</span>, lga_toka),</span>
<span id="cb8-6">         <span class="at" style="color: #657422;">lga_toka =</span> <span class="fu" style="color: #4758AB;">if_else</span>(lga_toka <span class="sc" style="color: #5E5E5E;">%in%</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"Wiaya"</span>, <span class="st" style="color: #20794D;">"WIlaya"</span>), <span class="st" style="color: #20794D;">"Wilaya"</span>, lga_toka),</span>
<span id="cb8-7">         <span class="at" style="color: #657422;">lga_enda =</span> <span class="fu" style="color: #4758AB;">if_else</span>(lga_enda<span class="sc" style="color: #5E5E5E;">==</span><span class="st" style="color: #20794D;">"Manipaa"</span>, <span class="st" style="color: #20794D;">"Manispaa"</span>, lga_enda),</span>
<span id="cb8-8">         <span class="at" style="color: #657422;">lga_enda =</span> <span class="fu" style="color: #4758AB;">if_else</span>(lga_enda <span class="sc" style="color: #5E5E5E;">%in%</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"Wiaya"</span>, <span class="st" style="color: #20794D;">"WIlaya"</span>), <span class="st" style="color: #20794D;">"Wilaya"</span>, lga_enda))</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">mikoa <span class="ot" style="color: #003B4F;">=</span> readxl<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">read_excel</span>(<span class="st" style="color: #20794D;">"d:/semba/vpo/data/tamisemi/uhamisho_data.xlsx"</span>, <span class="at" style="color: #657422;">sheet =</span> <span class="dv" style="color: #AD0000;">2</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb9-2">  janitor<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">clean_names</span>()</span>
<span id="cb9-3"></span>
<span id="cb9-4"></span>
<span id="cb9-5">mikoa <span class="ot" style="color: #003B4F;">=</span> mikoa <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb9-6">  dplyr<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">select</span>(<span class="sc" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">2</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb9-7">  <span class="fu" style="color: #4758AB;">separate</span>(<span class="at" style="color: #657422;">col =</span> halmashauri, <span class="at" style="color: #657422;">into =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"lga"</span>, <span class="st" style="color: #20794D;">"desig"</span>), <span class="at" style="color: #657422;">sep =</span> <span class="st" style="color: #20794D;">" "</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb9-8">  dplyr<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">select</span>(<span class="sc" style="color: #5E5E5E;">-</span>desig)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">toka <span class="ot" style="color: #003B4F;">=</span> tam.clean <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb10-2">  dplyr<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">select</span>(lga_toka_name) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb10-3">  <span class="fu" style="color: #4758AB;">left_join</span>(mikoa, <span class="at" style="color: #657422;">by =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"lga_toka_name"</span> <span class="ot" style="color: #003B4F;">=</span> <span class="st" style="color: #20794D;">"lga"</span>))</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">enda <span class="ot" style="color: #003B4F;">=</span> tam.clean <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb11-2">  dplyr<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">select</span>(lga_enda_name) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb11-3">  <span class="fu" style="color: #4758AB;">left_join</span>(mikoa, <span class="at" style="color: #657422;">by =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"lga_enda_name"</span> <span class="ot" style="color: #003B4F;">=</span> <span class="st" style="color: #20794D;">"lga"</span>)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb11-4">  <span class="fu" style="color: #4758AB;">rename</span>(<span class="at" style="color: #657422;">mkoa =</span> mikoa) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb11-5">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">region =</span> mkoa) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb11-6">  <span class="fu" style="color: #4758AB;">slice</span>(<span class="sc" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">1</span>)</span></code></pre></div>
</div>
<p>Looking in all region hide crucial information that</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">mkoa.mkoa <span class="ot" style="color: #003B4F;">=</span> toka <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">bind_cols</span>(enda) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb12-2">  <span class="fu" style="color: #4758AB;">group_by</span>(mikoa, region) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb12-3">  <span class="fu" style="color: #4758AB;">count</span>() <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb12-4">  datawizard<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">reshape_wider</span>(<span class="at" style="color: #657422;">values_from =</span> <span class="st" style="color: #20794D;">"n"</span>, <span class="at" style="color: #657422;">colnames_from =</span> <span class="st" style="color: #20794D;">"region"</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb12-5">  <span class="fu" style="color: #4758AB;">mutate</span>( <span class="fu" style="color: #4758AB;">across</span>(<span class="fu" style="color: #4758AB;">contains</span>(<span class="st" style="color: #20794D;">"n_"</span>), <span class="sc" style="color: #5E5E5E;">~</span><span class="fu" style="color: #4758AB;">ifelse</span>(<span class="fu" style="color: #4758AB;">is.na</span>(.x),<span class="dv" style="color: #AD0000;">0</span>,.x))) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb12-6">  <span class="fu" style="color: #4758AB;">slice</span>(<span class="sc" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">27</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb12-7">  dplyr<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">select</span>(<span class="sc" style="color: #5E5E5E;">-</span>n_NA) </span>
<span id="cb12-8"></span>
<span id="cb12-9">majina <span class="ot" style="color: #003B4F;">=</span> mkoa.mkoa <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">names</span>() <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">as_tibble</span>() <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">separate</span>(<span class="at" style="color: #657422;">col =</span> <span class="dv" style="color: #AD0000;">1</span>, <span class="at" style="color: #657422;">into =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"aa"</span>, <span class="st" style="color: #20794D;">"bb"</span>), <span class="at" style="color: #657422;">sep =</span> <span class="st" style="color: #20794D;">"_"</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">bb =</span> <span class="fu" style="color: #4758AB;">if_else</span>(<span class="fu" style="color: #4758AB;">is.na</span>(bb), <span class="st" style="color: #20794D;">"mikoa"</span>, bb)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">pull</span>(bb) </span>
<span id="cb12-10"></span>
<span id="cb12-11"><span class="fu" style="color: #4758AB;">names</span>(mkoa.mkoa) <span class="ot" style="color: #003B4F;">=</span> majina</span>
<span id="cb12-12"></span>
<span id="cb12-13"></span>
<span id="cb12-14">mkoa.matrix <span class="ot" style="color: #003B4F;">=</span> mkoa.mkoa <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb12-15">  <span class="fu" style="color: #4758AB;">column_to_rownames</span>(<span class="at" style="color: #657422;">var =</span> <span class="st" style="color: #20794D;">'mikoa'</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb12-16">  <span class="fu" style="color: #4758AB;">as.matrix</span>() </span>
<span id="cb12-17"></span>
<span id="cb12-18"></span>
<span id="cb12-19">mkoa.matrix <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb12-20">  <span class="fu" style="color: #4758AB;">chorddiag</span>(</span>
<span id="cb12-21">    <span class="at" style="color: #657422;">type =</span> <span class="st" style="color: #20794D;">"bipartite"</span>, </span>
<span id="cb12-22">            <span class="at" style="color: #657422;">showTicks =</span> F, <span class="at" style="color: #657422;">tickInterval =</span> <span class="dv" style="color: #AD0000;">2</span>,</span>
<span id="cb12-23">            <span class="at" style="color: #657422;">groupnameFontsize =</span> <span class="dv" style="color: #AD0000;">14</span>, </span>
<span id="cb12-24">            <span class="at" style="color: #657422;">groupnamePadding =</span> <span class="dv" style="color: #AD0000;">10</span>, </span>
<span id="cb12-25">    <span class="at" style="color: #657422;">groupColors =</span> <span class="fu" style="color: #4758AB;">hcl.colors</span>(<span class="at" style="color: #657422;">n =</span> <span class="dv" style="color: #AD0000;">30</span>, <span class="at" style="color: #657422;">palette =</span> <span class="st" style="color: #20794D;">"Berlin"</span>),</span>
<span id="cb12-26">            <span class="at" style="color: #657422;">margin =</span> <span class="dv" style="color: #AD0000;">90</span>, </span>
<span id="cb12-27">            <span class="at" style="color: #657422;">showGroupnames =</span> T</span>
<span id="cb12-28">  )</span></code></pre></div>
<div class="cell-output-display">
<div id="htmlwidget-fec2e5bb24e6e7c05beb" style="width:100%;height:464px;" class="chorddiag html-widget"></div>
<script type="application/json" data-for="htmlwidget-fec2e5bb24e6e7c05beb">{"x":{"matrix":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,25,2,1,1,1,1,4,2,1,3,1,2,3,2,3,2,2,2,1,3,3,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,2,1,1,1,0,1,3,2,0,0,0,2,1,0,1,0,0,1,4,2,1,2,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,25,1,3,0,1,2,3,2,4,1,4,2,0,0,2,4,1,2,2,4,1,4,4,5,4],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,1,3,0,3,6,2,4,3,1,3,2,4,1,1,1,1,2,3,5,0,39,2,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,17,2,0,1,0,0,0,1,2,1,3,0,0,1,1,1,0,1,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,6,2,27,0,3,1,2,2,1,2,0,4,0,2,2,0,1,2,2,7,0,3,1,2,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,7,2,0,1,1,0,0,2,0,0,0,1,0,1,1,1,0,1,1,0,0,2],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,0,3,3,20,0,2,4,3,5,2,2,2,2,1,0,3,2,3,4,2,2,0,0,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,0,1,1,4,31,2,3,3,6,3,8,2,2,1,4,1,2,1,5,1,3,0,0,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,0,1,0,0,0,0,0,2,1,2,0,0,1,2,1,3,1,0,0,0,20,0,2],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,6,0,1,0,1,2,34,2,1,2,1,3,2,1,1,3,1,2,2,2,0,0,0,0,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,1,4,1,3,1,2,35,5,3,3,5,1,1,2,0,1,1,1,4,2,4,0,2,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,1,2,0,2,1,2,4,61,5,4,5,7,4,4,1,0,1,6,3,2,4,0,3,2],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,2,2,0,2,5,3,4,3,44,0,2,1,4,2,1,2,1,5,5,4,2,1,4,2],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,6,1,1,2,5,4,0,2,3,0,29,1,0,3,1,0,1,0,0,1,2,2,2,2,2],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,3,0,2,5,2,1,4,2,2,55,1,1,4,3,2,1,4,4,0,6,1,4,6],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,2,0,0,0,2,3,1,3,6,1,0,0,22,3,0,3,0,0,2,3,0,0,0,0,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,0,1,0,0,2,1,2,5,2,5,2,1,24,0,0,1,0,2,3,1,3,1,1,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,2,1,1,2,2,3,6,3,0,1,0,1,19,3,1,2,0,0,1,2,0,1,3],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,2,0,0,3,0,1,3,4,2,3,0,2,3,0,2,1,4,3,1,1,0,28,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0,4,1,1,0,4,1,3,2,2,0,17,4,1,2,1,0,2,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,1,0,2,3,2,1,1,0,0,1,1,2,2,1,2,37,0,1,4,1,1,1,1,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,1,2,0,1,0,1,0,2,1,3,3,0,0,2,1,1,0,2,0,1,4,1,1,28],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,3,2,1,1,3,2,0,1,0,1,0,1,0,16,2,3,1,0,2,2,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,5,3,2,1,3,1,1,0,3,4,2,3,4,2,2,1,1,2,35,5,0,1,0,4,2],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,3,0,5,0,6,5,4,6,4,5,1,2,2,1,1,3,5,2,3,53,0,4,1,1,0],[25,1,3,3,2,2,0,2,2,0,2,0,2,1,1,0,4,2,0,1,0,2,2,1,1,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,0,25,3,1,6,0,1,2,2,6,3,3,1,6,2,2,3,1,0,2,2,3,1,5,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,0,1,1,17,2,0,0,0,2,0,1,1,2,1,1,0,0,0,0,2,1,1,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,2,3,3,2,27,1,3,1,0,1,4,2,2,1,3,0,1,2,2,2,0,2,1,2,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,0,0,0,0,7,3,1,1,0,1,0,0,2,0,0,0,1,0,0,2,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,3,1,3,2,20,4,0,1,3,2,2,5,2,2,0,1,0,0,3,1,3,3,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[4,1,2,6,0,1,0,0,31,0,2,1,1,5,4,5,3,2,2,3,4,2,0,2,1,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,0,3,2,0,2,1,2,2,0,34,2,2,3,0,2,1,1,2,0,1,1,1,1,1,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,2,4,0,2,1,4,3,0,2,35,4,4,2,1,3,2,3,1,1,1,0,1,0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[3,3,4,3,1,1,0,3,3,0,1,5,61,3,3,4,6,5,6,3,0,0,2,3,3,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,2,1,1,2,2,0,5,6,2,2,3,5,44,0,2,1,2,3,4,4,0,1,2,4,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,0,4,3,1,0,2,2,3,1,1,3,4,0,29,2,0,5,0,2,1,1,3,0,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[3,0,2,2,3,4,0,2,8,2,3,5,5,2,1,55,0,2,1,3,3,1,3,1,3,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,0,0,4,0,0,0,2,2,0,2,1,7,1,0,1,22,1,0,0,2,2,0,0,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[3,2,0,1,0,2,0,2,2,0,1,1,4,4,3,1,3,24,1,2,2,2,0,1,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,1,2,1,1,2,1,1,1,1,1,2,4,2,1,4,0,0,19,3,0,1,2,0,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,0,4,1,1,0,0,0,4,2,3,0,1,1,0,3,3,0,3,0,17,2,1,1,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,1,1,1,1,1,1,3,1,1,1,1,0,2,1,2,0,1,1,2,4,37,1,0,1,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,0,2,2,0,2,1,2,2,3,2,1,1,1,0,1,0,0,2,1,1,0,0,16,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[3,0,2,3,1,2,1,3,1,1,2,1,6,5,0,4,2,2,0,4,2,1,2,2,35,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[3,1,4,5,1,7,0,4,5,0,2,4,3,5,1,4,3,3,0,3,1,4,0,3,5,53,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,4,1,0,0,0,1,2,1,0,0,2,2,4,2,0,0,1,1,1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,2,4,39,1,3,1,2,3,0,0,4,4,2,2,6,0,3,2,1,2,1,4,0,1,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,4,2,0,1,0,0,0,20,0,0,0,1,2,1,0,1,0,0,1,1,1,2,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,2,5,1,1,2,0,0,0,0,0,2,3,4,2,4,0,1,1,28,1,1,1,2,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,4,0,0,1,2,1,1,2,1,0,2,2,2,6,1,1,3,1,0,1,28,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],"options":{"type":"bipartite","width":null,"height":null,"margin":90,"showGroupnames":true,"groupNames":["Arusha","Dar es salaam","Dodoma","Geita","Iringa","Kagera","Katavi","Kigoma","Kilimanjaro","Lindi","Manyara","Mara","Mbeya","Morogoro","Mtwara","Mwanza","Njombe","Pwani","Rukwa","Ruvuma","Shinyanga","Simiyu","Singida","Songwe","Tabora","Tanga","Arusha","Dodoma","Iringa","Kagera","Katavi","Kigoma","Kilimanjaro","Manyara","Mara","Mbeya","Morogoro","Mtwara","Mwanza","Njombe","Pwani","Rukwa","Shinyanga","Simiyu","Songwe","Tabora","Tanga","Dar es salaam","Geita","Lindi","Ruvuma","Singida"],"groupColors":["#7FBFF5","#5AADE9","#219CDE","#008BCC","#007AB5","#006A9F","#005C8B","#004F78","#004266","#003756","#002E48","#00253A","#031E2E","#0A1722","#0F1216","#171110","#231211","#2E1413","#391816","#461E1B","#542522","#642D29","#753632","#88403B","#9C4B46","#B15851","#C9655E","#DC766F","#EA8C86","#F8A29E"],"groupThickness":0.1,"groupPadding":0.0349065850398866,"groupnamePadding":[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10],"groupnameFontsize":14,"groupedgeColor":null,"chordedgeColor":"#808080","categoryNames":null,"categorynamePadding":100,"categorynameFontsize":28,"showTicks":false,"tickInterval":2,"ticklabelFontsize":10,"fadeLevel":0.1,"showTooltips":true,"showZeroTooltips":true,"tooltipNames":["Arusha","Dar es salaam","Dodoma","Geita","Iringa","Kagera","Katavi","Kigoma","Kilimanjaro","Lindi","Manyara","Mara","Mbeya","Morogoro","Mtwara","Mwanza","Njombe","Pwani","Rukwa","Ruvuma","Shinyanga","Simiyu","Singida","Songwe","Tabora","Tanga","Arusha","Dodoma","Iringa","Kagera","Katavi","Kigoma","Kilimanjaro","Manyara","Mara","Mbeya","Morogoro","Mtwara","Mwanza","Njombe","Pwani","Rukwa","Shinyanga","Simiyu","Songwe","Tabora","Tanga","Dar es salaam","Geita","Lindi","Ruvuma","Singida"],"tooltipFontsize":12,"tooltipUnit":"","tooltipGroupConnector":" &#x25B6; ","precision":"null","clickAction":null,"clickGroupAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Let us single out a region. for this case I choose Mara region and see</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1">changua.mkoa <span class="ot" style="color: #003B4F;">=</span> majina[<span class="sc" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">1</span>]</span>
<span id="cb13-2">i <span class="ot" style="color: #003B4F;">=</span><span class="dv" style="color: #AD0000;">9</span></span>
<span id="cb13-3"></span>
<span id="cb13-4"></span>
<span id="cb13-5"></span>
<span id="cb13-6">mtoko <span class="ot" style="color: #003B4F;">=</span> mkoa.mkoa <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb13-7">  <span class="fu" style="color: #4758AB;">filter</span>(mikoa <span class="sc" style="color: #5E5E5E;">==</span> changua.mkoa[i]) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb13-8">  dplyr<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">select</span>(<span class="sc" style="color: #5E5E5E;">-</span>changua.mkoa[i]) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb13-9">  <span class="fu" style="color: #4758AB;">column_to_rownames</span>(<span class="at" style="color: #657422;">var =</span> <span class="st" style="color: #20794D;">'mikoa'</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb13-10">  <span class="fu" style="color: #4758AB;">as.matrix</span>() </span>
<span id="cb13-11"></span>
<span id="cb13-12"></span>
<span id="cb13-13">mtoko <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb13-14">  <span class="fu" style="color: #4758AB;">chorddiag</span>(</span>
<span id="cb13-15">    <span class="at" style="color: #657422;">type =</span> <span class="st" style="color: #20794D;">"bipartite"</span>, </span>
<span id="cb13-16">    <span class="at" style="color: #657422;">showTicks =</span> F, </span>
<span id="cb13-17">    <span class="at" style="color: #657422;">tickInterval =</span> <span class="dv" style="color: #AD0000;">2</span>,</span>
<span id="cb13-18">    <span class="at" style="color: #657422;">groupnameFontsize =</span> <span class="dv" style="color: #AD0000;">14</span>, </span>
<span id="cb13-19">    <span class="at" style="color: #657422;">groupnamePadding =</span> <span class="dv" style="color: #AD0000;">10</span>, </span>
<span id="cb13-20">    <span class="at" style="color: #657422;">groupColors =</span> <span class="fu" style="color: #4758AB;">hcl.colors</span>(<span class="at" style="color: #657422;">n =</span> <span class="dv" style="color: #AD0000;">27</span>, <span class="at" style="color: #657422;">palette =</span> <span class="st" style="color: #20794D;">"Zissou 1"</span>),</span>
<span id="cb13-21">    <span class="at" style="color: #657422;">margin =</span> <span class="dv" style="color: #AD0000;">90</span>, </span>
<span id="cb13-22">    <span class="at" style="color: #657422;">showGroupnames =</span> T</span>
<span id="cb13-23">  )</span></code></pre></div>
<div class="cell-output-display">
<div id="htmlwidget-84d70733404c4a60d302" style="width:100%;height:464px;" class="chorddiag html-widget"></div>
<script type="application/json" data-for="htmlwidget-84d70733404c4a60d302">{"x":{"matrix":[[0,0,3,1,4,1,3,1,2,5,3,3,5,1,1,2,0,1,1,1,4,2,4,0,2,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],"options":{"type":"bipartite","width":null,"height":null,"margin":90,"showGroupnames":true,"groupNames":["Mara","Arusha","Dodoma","Iringa","Kagera","Katavi","Kigoma","Kilimanjaro","Manyara","Mbeya","Morogoro","Mtwara","Mwanza","Njombe","Pwani","Rukwa","Shinyanga","Simiyu","Songwe","Tabora","Tanga","Dar es salaam","Geita","Lindi","Ruvuma","Singida"],"groupColors":["#3B99B1","#35A0AE","#37A6A9","#42ACA4","#51B09F","#62B49B","#73B897","#84BB95","#95BE95","#A3C194","#B0C590","#BEC88C","#CECA87","#EACB2B","#EAC225","#EAB921","#E9B01D","#E8A71A","#E89D15","#E7940F","#E78A05","#E77F00","#E87300","#EA6600","#ED5600","#F04007","#F5191C"],"groupThickness":0.1,"groupPadding":0.0349065850398866,"groupnamePadding":[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10],"groupnameFontsize":14,"groupedgeColor":null,"chordedgeColor":"#808080","categoryNames":null,"categorynamePadding":100,"categorynameFontsize":28,"showTicks":false,"tickInterval":2,"ticklabelFontsize":10,"fadeLevel":0.1,"showTooltips":true,"showZeroTooltips":true,"tooltipNames":["Mara","Arusha","Dodoma","Iringa","Kagera","Katavi","Kigoma","Kilimanjaro","Manyara","Mbeya","Morogoro","Mtwara","Mwanza","Njombe","Pwani","Rukwa","Shinyanga","Simiyu","Songwe","Tabora","Tanga","Dar es salaam","Geita","Lindi","Ruvuma","Singida"],"tooltipFontsize":12,"tooltipUnit":"","tooltipGroupConnector":" &#x25B6; ","precision":"null","clickAction":null,"clickGroupAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>


</section>

<p>This blog is brought to you by <a href="https://semba.netlify.app" class="uri">https://semba.netlify.app</a></p> ]]></description>
  <category>news</category>
  <category>code</category>
  <category>analysis</category>
  <guid>https://www.semba.netlify.app/posts/newvisuals/index.html</guid>
  <pubDate>Wed, 10 Aug 2022 21:00:00 GMT</pubDate>
  <media:content url="https://www.semba.netlify.app/posts/newvisuals/packedbubble.png" medium="image" type="image/png" height="84" width="144"/>
</item>
<item>
  <title>Spatial Data is Maturing in R</title>
  <dc:creator>Masjumbuko Semba</dc:creator>
  <link>https://www.semba.netlify.app/posts/spatialState/index.html</link>
  <description><![CDATA[ 




<p>R is particularly powerful for spatial statistical analysis and quantitative researchers in particular may find R more useful than GIS desktop applications</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://www.semba.netlify.app/posts/spatialState/spatial.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">spatial coxtent</figcaption><p></p>
</figure>
</div>
<p>R is particularly powerful for spatial statistical analysis and quantitative researchers in particular may find R more useful than GIS desktop applications. As data becomes more geographical, there is a growing necessity to make spatial data more accessible and easy to process. While there are plenty of tools out there that can make your life much easier when processing spatial data (e.g.&nbsp;QGIS and ArcMap) using R to conduct spatial analysis can be just as easy. This is especially true if you’re new to some of these packages and don’t feel like reading through all of the documentation to learn the package or, even more tedious, writing hundreds of lines of your own code to do something relatively simple. In this article I discuss a few packages that make common spatial statistics methods easy to perform in R <span class="citation" data-cites="bivand2006implementing">[@bivand2006implementing]</span>.</p>
<p>We will conduct a high-level assessment of the R packages that are dedicated for spatial analysis. By showing network connection across package dependencies — which packages utilize code from another package to execute a task – we will undertake a high-level assessment of the condition of spatial in R. For comparison, we’ll compare our Analysis of Spatial Data task view to the tidyverse, one of R’s most well-known collections of packages, as well as the venerable Environmetrics task view, which includes numerous environmental analysis tools. To accomplish so, we’ll need to write some R code and install the following packages:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb1-1"><span class="in" style="color: #5E5E5E;">```{r, eval=TRUE}</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;">library</span>(tidygraph)</span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;">library</span>(ggraph)</span>
<span id="cb1-5"><span class="fu" style="color: #4758AB;">library</span>(ctv)</span>
<span id="cb1-6"><span class="fu" style="color: #4758AB;">library</span>(tools)</span>
<span id="cb1-7"><span class="fu" style="color: #4758AB;">library</span>(cranlogs)</span>
<span id="cb1-8"><span class="fu" style="color: #4758AB;">require</span>(highcharter)</span>
<span id="cb1-9"><span class="in" style="color: #5E5E5E;">```</span></span></code></pre></div>
</div>
<p>We will use the handy <code>CRAN_package_db</code> function from the <strong>tools</strong> package which conveniently grabs information from the <code>DESCRIPTION</code> file of every package on CRAN and turns it into a dataframe.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">all_cran_packages <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">CRAN_package_db</span>()</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">all_cran_packages <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb3-2">  <span class="fu" style="color: #4758AB;">glimpse</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 19,050
Columns: 66
$ Package                   &lt;chr&gt; "A3", "aaSEA", "AATtools", "ABACUS", "abbrev~
$ Version                   &lt;chr&gt; "1.0.0", "1.1.0", "0.0.1", "1.0.0", "0.1", "~
$ Priority                  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ Depends                   &lt;chr&gt; "R (&gt;= 2.15.0), xtable, pbapply", "R(&gt;= 3.4.~
$ Imports                   &lt;chr&gt; NA, "DT(&gt;= 0.4), networkD3(&gt;= 0.4), shiny(&gt;=~
$ LinkingTo                 &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, "Rcpp, B~
$ Suggests                  &lt;chr&gt; "randomForest, e1071", "knitr, rmarkdown", N~
$ Enhances                  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ License                   &lt;chr&gt; "GPL (&gt;= 2)", "GPL-3", "GPL-3", "GPL-3", "GP~
$ License_is_FOSS           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ License_restricts_use     &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ OS_type                   &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ Archs                     &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ MD5sum                    &lt;chr&gt; "027ebdd8affce8f0effaecfcd5f5ade2", "0f9aaef~
$ NeedsCompilation          &lt;chr&gt; "no", "no", "no", "no", "no", "no", "no", "n~
$ Additional_repositories   &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ Author                    &lt;chr&gt; "Scott Fortmann-Roe", "Raja Sekhara Reddy D.~
$ `Authors@R`               &lt;chr&gt; NA, NA, "person(\"Sercan\", \"Kahveci\", ema~
$ Biarch                    &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ BugReports                &lt;chr&gt; NA, NA, "https://github.com/Spiritspeak/AATt~
$ BuildKeepEmpty            &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ BuildManual               &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ BuildResaveData           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ BuildVignettes            &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ Built                     &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ ByteCompile               &lt;chr&gt; NA, NA, "true", NA, NA, NA, NA, NA, NA, NA, ~
$ `Classification/ACM`      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ `Classification/ACM-2012` &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ `Classification/JEL`      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ `Classification/MSC`      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ `Classification/MSC-2010` &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ Collate                   &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ Collate.unix              &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ Collate.windows           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ Contact                   &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, "Ian Morison~
$ Copyright                 &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ Date                      &lt;chr&gt; "2015-08-15", NA, NA, NA, "2021-12-12", NA, ~
$ Description               &lt;chr&gt; "Supplies tools for tabulating and analyzing~
$ Encoding                  &lt;chr&gt; NA, "UTF-8", "UTF-8", "UTF-8", "UTF-8", NA, ~
$ KeepSource                &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ Language                  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ LazyData                  &lt;chr&gt; NA, "true", "true", "true", NA, "true", NA, ~
$ LazyDataCompression       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ LazyLoad                  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, "yes~
$ MailingList               &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ Maintainer                &lt;chr&gt; "Scott Fortmann-Roe &lt;scottfr@berkeley.edu&gt;",~
$ Note                      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ Packaged                  &lt;chr&gt; "2015-08-16 14:17:33 UTC; scott", "2019-11-0~
$ RdMacros                  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ StagedInstall             &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ SysDataCompression        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ SystemRequirements        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, "GNU make", ~
$ Title                     &lt;chr&gt; "Accurate, Adaptable, and Accessible Error M~
$ Type                      &lt;chr&gt; "Package", "Package", "Package", NA, "Packag~
$ URL                       &lt;chr&gt; NA, NA, NA, "https://shiny.abdn.ac.uk/Stats/~
$ UseLTO                    &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ VignetteBuilder           &lt;chr&gt; NA, "knitr", NA, "knitr", NA, "knitr", NA, N~
$ ZipData                   &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ Published                 &lt;chr&gt; "2015-08-16", "2019-11-09", "2020-06-14", "2~
$ Path                      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ `X-CRAN-Comment`          &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ `Reverse depends`         &lt;chr&gt; NA, NA, NA, NA, NA, NA, "abctools, EasyABC",~
$ `Reverse imports`         &lt;chr&gt; NA, NA, NA, NA, NA, NA, "ecolottery, poems",~
$ `Reverse linking to`      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~
$ `Reverse suggests`        &lt;chr&gt; NA, NA, NA, NA, NA, NA, "coala", "abctools",~
$ `Reverse enhances`        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~</code></pre>
</div>
</div>
<p>Here we are interested with the package and imports columns, so we will select them and drop the rest from the dataset. Then, we parse clean and tidy the columns in the dataset to make it a little easier to work with:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">tidied_cran_imports <span class="ot" style="color: #003B4F;">=</span> all_cran_packages <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb5-2">  janitor<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">clean_names</span>() <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb5-3">  <span class="fu" style="color: #4758AB;">select</span>(package, imports) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb5-4">  <span class="fu" style="color: #4758AB;">as_tibble</span>() <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb5-5">  <span class="fu" style="color: #4758AB;">separate_rows</span>(imports, <span class="at" style="color: #657422;">sep =</span> <span class="st" style="color: #20794D;">","</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb5-6">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">imports =</span> <span class="fu" style="color: #4758AB;">str_replace</span>(imports,<span class="st" style="color: #20794D;">"</span><span class="sc" style="color: #5E5E5E;">\\</span><span class="st" style="color: #20794D;">s*</span><span class="sc" style="color: #5E5E5E;">\\</span><span class="st" style="color: #20794D;">([^</span><span class="sc" style="color: #5E5E5E;">\\</span><span class="st" style="color: #20794D;">)]+</span><span class="sc" style="color: #5E5E5E;">\\</span><span class="st" style="color: #20794D;">)"</span>,<span class="st" style="color: #20794D;">""</span>)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb5-7">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">imports =</span> <span class="fu" style="color: #4758AB;">str_trim</span>(imports, <span class="at" style="color: #657422;">side =</span> <span class="st" style="color: #20794D;">"both"</span>)) </span>
<span id="cb5-8"></span>
<span id="cb5-9">tidied_cran_imports <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">head</span>(<span class="dv" style="color: #AD0000;">10</span>)</span></code></pre></div>
</div>
<section id="package-connectivity" class="level2">
<h2 class="anchored" data-anchor-id="package-connectivity">Package Connectivity</h2>
<p>Let’s start with a look at the tidyverse. We can take the unusual step of actually employing a function from the tidyverse package (aptly titled <code>tidyverse_packages</code>), which identifies those packages that are formally part of the tidyverse. To see package connection, we filter for those packages and their imports, convert to <code>tbl_graph</code>, then plot using <strong>ggraph</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">tidyverse_tbl <span class="ot" style="color: #003B4F;">&lt;-</span> tidied_cran_imports <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb6-2">  <span class="fu" style="color: #4758AB;">filter</span>(package <span class="sc" style="color: #5E5E5E;">%in%</span> <span class="fu" style="color: #4758AB;">tidyverse_packages</span>()) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb6-3">  <span class="fu" style="color: #4758AB;">filter</span>(imports <span class="sc" style="color: #5E5E5E;">%in%</span> <span class="fu" style="color: #4758AB;">tidyverse_packages</span>()) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb6-4">  <span class="fu" style="color: #4758AB;">as_tbl_graph</span>()</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="fu" style="color: #4758AB;">ggraph</span>(tidyverse_tbl, <span class="at" style="color: #657422;">layout =</span> <span class="st" style="color: #20794D;">"nicely"</span>)  <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb7-2">  <span class="fu" style="color: #4758AB;">geom_edge_link</span>(<span class="at" style="color: #657422;">colour =</span> <span class="st" style="color: #20794D;">"grey50"</span>) <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb7-3">  <span class="fu" style="color: #4758AB;">geom_node_point</span>()<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb7-4">  <span class="fu" style="color: #4758AB;">geom_node_text</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">label =</span> name), <span class="at" style="color: #657422;">colour =</span> <span class="st" style="color: #20794D;">"black"</span>, <span class="at" style="color: #657422;">size =</span> <span class="fl" style="color: #AD0000;">3.5</span>, <span class="at" style="color: #657422;">parse =</span> <span class="cn" style="color: #8f5902;">TRUE</span>, <span class="at" style="color: #657422;">repel =</span> <span class="cn" style="color: #8f5902;">FALSE</span>, <span class="at" style="color: #657422;">check_overlap =</span> <span class="cn" style="color: #8f5902;">TRUE</span>, <span class="at" style="color: #657422;">nudge_y =</span> .<span class="dv" style="color: #AD0000;">12</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb7-5">  <span class="fu" style="color: #4758AB;">theme_void</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://www.semba.netlify.app/posts/spatialState/index_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<p>Many intersecting lines traverse in all directions, as one might anticipate, because many packages in tidyverse import other packages. As the tidyverse develops, this is to be expected.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">env_packages <span class="ot" style="color: #003B4F;">&lt;-</span> ctv<span class="sc" style="color: #5E5E5E;">:::</span><span class="fu" style="color: #4758AB;">.get_pkgs_from_ctv_or_repos</span>(<span class="at" style="color: #657422;">views =</span> <span class="st" style="color: #20794D;">"Environmetrics"</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb8-2">  <span class="fu" style="color: #4758AB;">unlist</span>(<span class="at" style="color: #657422;">use.names =</span> <span class="cn" style="color: #8f5902;">FALSE</span>)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">env_tbl <span class="ot" style="color: #003B4F;">&lt;-</span> tidied_cran_imports <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb9-2">  <span class="fu" style="color: #4758AB;">filter</span>(package <span class="sc" style="color: #5E5E5E;">%in%</span> env_packages) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb9-3">  <span class="fu" style="color: #4758AB;">filter</span>(imports <span class="sc" style="color: #5E5E5E;">%in%</span> env_packages) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb9-4">  <span class="fu" style="color: #4758AB;">as_tbl_graph</span>()</span>
<span id="cb9-5"></span>
<span id="cb9-6">env_tbl <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb9-7">  <span class="fu" style="color: #4758AB;">ggraph</span>(<span class="at" style="color: #657422;">layout =</span> <span class="st" style="color: #20794D;">'nicely'</span>) <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb9-8">  <span class="fu" style="color: #4758AB;">geom_edge_link</span>(<span class="at" style="color: #657422;">colour =</span> <span class="st" style="color: #20794D;">"grey50"</span>) <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb9-9">  <span class="fu" style="color: #4758AB;">geom_node_point</span>()<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb9-10">  <span class="fu" style="color: #4758AB;">geom_node_text</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">label =</span> name), <span class="at" style="color: #657422;">colour =</span> <span class="st" style="color: #20794D;">"black"</span>, <span class="at" style="color: #657422;">size =</span> <span class="fl" style="color: #AD0000;">3.5</span>, <span class="at" style="color: #657422;">parse =</span> <span class="cn" style="color: #8f5902;">TRUE</span>, <span class="at" style="color: #657422;">repel =</span> <span class="cn" style="color: #8f5902;">FALSE</span>, <span class="at" style="color: #657422;">check_overlap =</span> <span class="cn" style="color: #8f5902;">TRUE</span>, <span class="at" style="color: #657422;">nudge_y =</span> .<span class="dv" style="color: #AD0000;">3</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb9-11">  <span class="fu" style="color: #4758AB;">theme_void</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://www.semba.netlify.app/posts/spatialState/index_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Next, let’s look at the Spatial Analysis task view, where we might not expect to see the same level of connectedness. The infrastructure underlying CRAN task views, the <strong>ctv</strong> package, (sort of) provides a function to obtain a vector of package names for a given task view, which we can use to make a network plot:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">spatial_packages <span class="ot" style="color: #003B4F;">&lt;-</span> ctv<span class="sc" style="color: #5E5E5E;">:::</span><span class="fu" style="color: #4758AB;">.get_pkgs_from_ctv_or_repos</span>(<span class="at" style="color: #657422;">views =</span> <span class="st" style="color: #20794D;">"Spatial"</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb10-2">  <span class="fu" style="color: #4758AB;">unlist</span>(<span class="at" style="color: #657422;">use.names =</span> <span class="cn" style="color: #8f5902;">FALSE</span>)</span></code></pre></div>
</div>
<p>We then pull the packages that are in spatial analysis task view that are found in all packages that are tidied and convert them to ggraph table and plot the network</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">sp_tbl <span class="ot" style="color: #003B4F;">&lt;-</span> tidied_cran_imports <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb11-2">  <span class="fu" style="color: #4758AB;">filter</span>(package <span class="sc" style="color: #5E5E5E;">%in%</span> spatial_packages) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb11-3">  <span class="fu" style="color: #4758AB;">filter</span>(imports <span class="sc" style="color: #5E5E5E;">%in%</span> spatial_packages) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb11-4">  <span class="fu" style="color: #4758AB;">as_tbl_graph</span>()</span>
<span id="cb11-5"></span>
<span id="cb11-6">sp_tbl <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb11-7">  <span class="fu" style="color: #4758AB;">ggraph</span>(<span class="at" style="color: #657422;">layout =</span> <span class="st" style="color: #20794D;">'fr'</span>) <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb11-8">  <span class="fu" style="color: #4758AB;">geom_edge_link</span>(<span class="at" style="color: #657422;">colour =</span> <span class="st" style="color: #20794D;">"grey"</span>) <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb11-9">  <span class="fu" style="color: #4758AB;">geom_node_point</span>(<span class="at" style="color: #657422;">colour=</span><span class="st" style="color: #20794D;">"lightblue"</span>, <span class="at" style="color: #657422;">size=</span><span class="dv" style="color: #AD0000;">2</span>) <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb11-10">  <span class="fu" style="color: #4758AB;">geom_node_text</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">label=</span>name), <span class="at" style="color: #657422;">repel=</span><span class="cn" style="color: #8f5902;">FALSE</span>, <span class="at" style="color: #657422;">check_overlap =</span> <span class="cn" style="color: #8f5902;">TRUE</span>, <span class="at" style="color: #657422;">nudge_y =</span> .<span class="dv" style="color: #AD0000;">2</span>) <span class="sc" style="color: #5E5E5E;">+</span>  </span>
<span id="cb11-11">  <span class="fu" style="color: #4758AB;">theme_graph</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://www.semba.netlify.app/posts/spatialState/index_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">sp_tbl <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb12-2">  <span class="fu" style="color: #4758AB;">ggraph</span>(<span class="at" style="color: #657422;">layout =</span> <span class="st" style="color: #20794D;">'linear'</span>,<span class="at" style="color: #657422;">circular =</span> <span class="cn" style="color: #8f5902;">TRUE</span>) <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb12-3">  <span class="fu" style="color: #4758AB;">geom_edge_link</span>(<span class="at" style="color: #657422;">colour =</span> <span class="st" style="color: #20794D;">"grey50"</span>) <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb12-4">  <span class="fu" style="color: #4758AB;">geom_node_point</span>()<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb12-5">  <span class="fu" style="color: #4758AB;">geom_node_text</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">label =</span> name), <span class="at" style="color: #657422;">colour =</span> <span class="st" style="color: #20794D;">"black"</span>, <span class="at" style="color: #657422;">size =</span> <span class="fl" style="color: #AD0000;">3.5</span>, <span class="at" style="color: #657422;">parse =</span> <span class="cn" style="color: #8f5902;">TRUE</span>, <span class="at" style="color: #657422;">repel =</span> <span class="cn" style="color: #8f5902;">TRUE</span>, <span class="at" style="color: #657422;">check_overlap =</span> <span class="cn" style="color: #8f5902;">TRUE</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb12-6">  <span class="fu" style="color: #4758AB;">theme_void</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://www.semba.netlify.app/posts/spatialState/index_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<p>There is clearly some connectivity among spatial-related packages, which serves as a reminder that task views on CRAN aren’t the only location where users find packages to use. Some programs, like <strong>sf</strong>, establish a hub of related packages because they share a package maintainer, while others, like <strong>sp</strong>, investigate spatial systems using a wide range of spatial packages. The graph below shows the number of downloads of the <strong>cranlogs</strong> package from the RStudio CRAN mirror over the last year.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1">kgcount <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">cran_downloads</span>(<span class="at" style="color: #657422;">packages =</span> spatial_packages, </span>
<span id="cb13-2">                           <span class="at" style="color: #657422;">from =</span> <span class="fu" style="color: #4758AB;">Sys.Date</span>()<span class="sc" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">*</span><span class="dv" style="color: #AD0000;">365</span>, </span>
<span id="cb13-3">                           <span class="at" style="color: #657422;">to =</span> <span class="fu" style="color: #4758AB;">Sys.Date</span>())</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1">kgcount <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb14-2">  <span class="fu" style="color: #4758AB;">group_by</span>(package) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb14-3">  <span class="fu" style="color: #4758AB;">summarise</span>(<span class="at" style="color: #657422;">downloads =</span> <span class="fu" style="color: #4758AB;">sum</span>(count)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb14-4">  <span class="fu" style="color: #4758AB;">filter</span>(downloads <span class="sc" style="color: #5E5E5E;">&gt;=</span> <span class="dv" style="color: #AD0000;">450000</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb14-5">  <span class="fu" style="color: #4758AB;">arrange</span>(<span class="fu" style="color: #4758AB;">desc</span>(downloads)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb14-6">  <span class="fu" style="color: #4758AB;">hchart</span>(<span class="at" style="color: #657422;">type =</span> <span class="st" style="color: #20794D;">"bar"</span>, <span class="fu" style="color: #4758AB;">hcaes</span>(<span class="at" style="color: #657422;">x =</span> package, <span class="at" style="color: #657422;">y =</span> downloads)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb14-7">  <span class="fu" style="color: #4758AB;">hc_xAxis</span>(<span class="at" style="color: #657422;">title =</span> <span class="fu" style="color: #4758AB;">list</span>(<span class="at" style="color: #657422;">text =</span> <span class="st" style="color: #20794D;">"Mothly downloads"</span>)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb14-8">  <span class="fu" style="color: #4758AB;">hc_yAxis</span>(<span class="at" style="color: #657422;">title =</span> <span class="cn" style="color: #8f5902;">FALSE</span>)</span></code></pre></div>
</div>
</section>
<section id="reference" class="level1 unnumbered">
<h1 class="unnumbered">Reference</h1>


</section>

<p>This blog is brought to you by <a href="https://semba.netlify.app" class="uri">https://semba.netlify.app</a></p> ]]></description>
  <category>news</category>
  <category>code</category>
  <category>analysis</category>
  <category>spatial</category>
  <guid>https://www.semba.netlify.app/posts/spatialState/index.html</guid>
  <pubDate>Sun, 07 Aug 2022 21:00:00 GMT</pubDate>
  <media:content url="https://www.semba.netlify.app/posts/spatialState/spatial.png" medium="image" type="image/png" height="66" width="144"/>
</item>
<item>
  <title>Data Science at the frontline</title>
  <dc:creator>Masjumbuko Semba</dc:creator>
  <link>https://www.semba.netlify.app/posts/lessons/index.html</link>
  <description><![CDATA[ 




<p>Data science has become an essential element for companies that want to …………….</p>
<p><img src="https://www.semba.netlify.app/posts/lessons/coding.jpg" class="img-fluid"></p>
<p>Data science has become an essential element for companies that want to gain a competitive advantage. The role of data science is to put the data analytics process into a strategic context so that companies can harness the power of their data while working on their data science project. In this post I will take you through some key concepts that a keen data scientists should carefully and with intent consider and explore before take a data related consutation. A clear understanding of these key concept will guide into some key focus areas that surround the project. You will understand the differences between different stages and how to tackle them effectively depending on your end goal with the project.</p>
<section id="time-sinks-for-data-wrangling" class="level2">
<h2 class="anchored" data-anchor-id="time-sinks-for-data-wrangling">Time sinks for data wrangling</h2>
<p>Estimating the time it will take to complete a project is an important part of being a successful PhD student, researcher or consultant. A major time sink on many analytical projects is data wrangling. Often the wrangling can take longer than the analysis. Here’s some good questions to ask yourself and your collaborators. They will help you better estimate the time you need for data wrangling.</p>
</section>
<section id="who-has-the-data" class="level2">
<h2 class="anchored" data-anchor-id="who-has-the-data">Who has the data?</h2>
<p>If you are starting a collaboration, find out where the data is stored before starting. Many times collaborators have told me they ‘have’ or ‘can get’ the data. We start and I find out they don’t actually, literally, have the data, they just know someone who has it. So begins a lengthy negotiation about data access with the person that actually has the data. Another consideration in such cases is whether your use is consistent with original ethics approval for the data collection (if it was needed).</p>
</section>
<section id="is-the-data-real" class="level2">
<h2 class="anchored" data-anchor-id="is-the-data-real">Is the data real?</h2>
<p>Seriously, if its not your data, are you sure its real data? Ok this situation is rare (I hope), but it does happen that collaborators share false data.</p>
</section>
<section id="how-is-the-data-recorded-and-stored" class="level2">
<h2 class="anchored" data-anchor-id="how-is-the-data-recorded-and-stored">How is the data recorded and stored?</h2>
<p>If collaborating to get data, find out how it is stored and recorded. Is it in pdf tables, is it a single spreadsheet with good meta-data, or is it a series of nested excel sheets with cross-referenced formulas?</p>
</section>
<section id="has-the-data-been-analyzed-before" class="level2">
<h2 class="anchored" data-anchor-id="has-the-data-been-analyzed-before">Has the data been analyzed before?</h2>
<p>If it has, it is usually already cleaned and easier to work with. Also check what it has been used for. If it has been used just to generate high level summary stats, it might not be clean for detailed analysis. If its been analyzed in R or python before, even better. It is probably clean and R ready.</p>
</section>
<section id="how-big-ie-computer-memory-is-the-data" class="level2">
<h2 class="anchored" data-anchor-id="how-big-ie-computer-memory-is-the-data">How big (ie computer memory) is the data?</h2>
<p>Bigger datasets are harder to clean and error check. Very small data can be checked manually. Larger datasets can easily be checked with a combination of manual checking, graphs and programming. Very large dataset (ie bigger than your RAM, like gigabytes) present new problems. R will take a while to chug through processing steps. This can really slow down debugging, especially for complex tasks.</p>
<p>You may also have to develop special strategies, like breaking your data into chunks for error checking and debugging of analysis. All in all this means a 500kb file takes about the same amount of time to wrangle as a 100mb file, whereas a 1 gigabyte file might take 10 times longer.</p>
</section>
<section id="does-the-project-involve-spatial-data" class="level2">
<h2 class="anchored" data-anchor-id="does-the-project-involve-spatial-data">Does the project involve spatial data?</h2>
<p>Spatial data records dependencies between data points (coordinates). This can present new problems. You’ll obviously need to use specialist GIS tools. Processing steps can be much slower, because the algorithms to cope with spatial dependency just take longer. For example, the maths of a spatial join is much more complex (geometry) than that for a regular join of two dataframes on a single variable.</p>
</section>
<section id="does-the-project-involve-temporal-data" class="level2">
<h2 class="anchored" data-anchor-id="does-the-project-involve-temporal-data">Does the project involve temporal data?</h2>
<p>Dates and times are hard to work with. First there can be gaps in a time-series. How will you deal with that? Maybe you need to impute values before analysis?</p>
<p>Second, the programming of dates is just hard. I don’t know anyone that likes it. For example, what day is 30 days before the 15th March? Depends on whether its a leap year right? Annoying details like this can really slow you dowe.</p>
<p>Also timezones! People always send me data with times, but neglect to tell me what time zone its in (or I forget to ask perhaps).</p>
</section>
<section id="are-you-joining-multiple-datasets" class="level2">
<h2 class="anchored" data-anchor-id="are-you-joining-multiple-datasets">Are you joining multiple datasets?</h2>
<p>This is a big one. Joining datasets is a major, major, timesink.</p>
<p>So much so, you could basically say my niche in my field is joining different datasets in new ways. We can get new interesting results, but it can be hard (which is why not everyone is doing it).</p>
<p>First, joins present opportunities for errors. If you are doing a simple join on a shared variable (e.g.&nbsp;with dplyr’s inner_join), but the variable is coded inconsistently across dataframes you might loose data. This might be hard to detect in large datasets.</p>
<p>Second, joins might be based more loosely on spatial or temporal similarities. These can get fiddly. Say you want to extract wave height data at some diver survey sites. Just use the coordinates right? Well, what if the wave data doesn’t extend all the way to the coast, or the resolution is too ‘blocky’ and it misses some dive sites? Now you have to invent a way to find wave values near to dive sites, ideally only when wave data are missing. It gets fiddly.</p>
<p>The same issue happens with joins on times/dates. Maybe rainfall isn’t measured on the exact day you had bird counts. So perhaps now you impute rainfall to the missing day, but what algorithm of the 1000s possible are you going to use for the imputation?</p>
</section>
<section id="summary" class="level2">
<h2 class="anchored" data-anchor-id="summary">Summary</h2>
<p>So think carefully about the issues your project’s data might present. If you’re still not sure how long it might take, then try this formula recommended by a friend:</p>


</section>

<p>This blog is brought to you by <a href="https://semba.netlify.app" class="uri">https://semba.netlify.app</a></p> ]]></description>
  <category>news</category>
  <guid>https://www.semba.netlify.app/posts/lessons/index.html</guid>
  <pubDate>Wed, 03 Aug 2022 21:00:00 GMT</pubDate>
  <media:content url="https://www.semba.netlify.app/posts/lessons/coding.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Welcome to Coding in R</title>
  <dc:creator>Daniel Semba</dc:creator>
  <link>https://www.semba.netlify.app/posts/coding_r/index.html</link>
  <description><![CDATA[ 




<p>Coding is now in blazing flame. Welcome!</p>
<p><img src="https://www.semba.netlify.app/posts/coding_r/kigomaBangwe.jpg" class="img-fluid"></p>
<section id="the-way" class="level2">
<h2 class="anchored" data-anchor-id="the-way">The Way</h2>
<p>Suntibus sunte num est ut exeruptate de ex eveliqui nis cus derumet, nes aliquia ssequae nonserferum del ipsapic te volectiunt facest et, serum acius, aut iduciam et am nonectus sumque parum fuga. Ut acerfer itiusam lam eosae consequodit quasimusae coris remquam nimossum int vitiis rem exerovi tatqui te pa conseque nonsequae. Aborae con num et occus. Untio occum adit quiant, se veria sin custionsecto qui cus quiduci tassit harum ea sit et quiatur sit que parchil et ut et untus eatia nonsequ ideribus numquat restio beaquis expliqu iamendanim quis et lam net andiame ndanissim et labo. Sedit volorum facestiore, autet, ut quam quibus re remperu mquaernatiae sant od que corehenti commoloratio moluptatia cusamus ciatisc ienihitis ipsamet invelicae doluptam, corentius exerate culpa sit re nemodio repudigendit la aspienietur, sinvent, sequossime re dolestiis ratendest, cum evelestiame es et aut vel int, quis si tem nam est, tet omnis niet accuscienis explige ntiumque sundignis dolorum dunt.</p>
</section>
<section id="when-riding" class="level2">
<h2 class="anchored" data-anchor-id="when-riding">When Riding</h2>
<p>Tur abo. Explaut vendi doloreius atinum vel modipic to es alistiberum illaut di comni del ipsum quam, utes ducid ut omni acesedi caectates ducit volestrum fugit explabo. Ihictium vit re voluptati derro minus etusda denist, sa nosanditi aut venim quis molor ra nonsequ atempel molorpos reptatibus sa nullore voluptatis cum vel is natur moluptam ideliqu aepudit assereh enihill uptaessit alit ma nonseca eperro etur, officient unt enimi, sequiat istiam ullestrum que sam, venda doloribust, serio il et ommolore dent adiae. Rundelessum hiciendus sequo et aut essi qui adipsanis voluptae perupta tuscius necearunt persper feribus esequo volorec tentur? Aliatem eius audit aborrov idenit maioribus quasperum iusam cuscipsant.</p>
</section>
<section id="the-killing-time" class="level2">
<h2 class="anchored" data-anchor-id="the-killing-time">The killing time</h2>
<p>In consequam sequat eatinti onseque plique re endis quiatur alibus quasperit asi doleniam, quuntio eseque volorion ra quaecernatus endessum quis endipita quia dis am, conest, imporem etur sunt eaqui tenias es alicaborate vellitinimus maiorumque pre, qui reruptur aut fugia volo conseditate vel mosandae omnimet ipicatin cor as que nectisitium remporenim autatur rerum ipidunt quodis et volorio. Bis debis aut quo vereiur? Catem num hil il eos dent a doluptatur sin eaquas parchitatur, volorpos quaeruptatio quam quam qui doloritatium nostinum facea doluptati aut re dignat.</p>
</section>
<section id="we-love-the-flow" class="level2">
<h2 class="anchored" data-anchor-id="we-love-the-flow">We love the flow</h2>
<p>Mus dolorendae pe plaborrorro et ut dolut est maion re, sitint fugia dis nus nobis explici dellaborrum aspe sequae nonseru ptature mpellam, offic te por aut dolorit atecearum sus que consend untiberit ad ullaccab in commo cus, odit a vellore ssundae pore provid ut qui tota comnis conseri taspelitates a volentus et es imagnit haria voluptatios estiuntis solorum et, simus ex estiae corro blanitata nisiment et aut lacerferum aut arum quibeaquae volorem is aut atia accum quae plantis audit veni atur? Ficimus, nonescient et voluptatibus evenimet adis in nonsequatur aut quame porem fuga. Sent el moluptaes diorunt eume et quiandebit harupissit moles doluptiis et poreium quatur rest utem samet doluptur? Quias reperatis ipsum vit aut aliquiditem fugiandicit eaqui ut issi dioneceris volore volorepedi officiditia volum exped ut optas rem eati que evelictem vernam, si cus expedic totaecepelit vendam, odit lantestius, optiumquam evero et eariore pudignis ea quaepud antissime parciat ioruptaturem sum re ipitati odipis adis imolorio.</p>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>At il invel iur, cor aut eos aut haribus ut earchil iur, cum vitatust fuga. Nequaes repudae eum aciis as remporum est vollaboribus is ea volorero quas nectorios id molut labo. Itatur, ut arumquo omnienderum sunt re dicia diti occatur, sit, sum fuga. Nequias sitibusti officim aximpor epudis abor resti distior ru</p>


</section>

<p>This blog is brought to you by <a href="https://semba.netlify.app" class="uri">https://semba.netlify.app</a></p> ]]></description>
  <category>news</category>
  <guid>https://www.semba.netlify.app/posts/coding_r/index.html</guid>
  <pubDate>Tue, 02 Aug 2022 21:00:00 GMT</pubDate>
  <media:content url="https://www.semba.netlify.app/posts/coding_r/kigomaBangwe.jpg" medium="image" type="image/jpeg"/>
</item>
</channel>
</rss>
